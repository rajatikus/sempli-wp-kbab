!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).enquire=t()}(function(){return function i(o,r,s){function u(e,t){if(!r[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n=r[e]={exports:{}};o[e][0].call(n.exports,function(t){var n=o[e][1][t];return u(n||t)},n,n.exports,i,o,r,s)}return r[e].exports}for(var c="function"==typeof require&&require,t=0;t<s.length;t++)u(s[t]);return u}({1:[function(t,n,e){function i(t,n){this.query=t,this.isUnconditional=n,this.handlers=[],this.mql=window.matchMedia(t);var e=this;this.listener=function(t){e.mql=t.currentTarget||t,e.assess()},this.mql.addListener(this.listener)}var o=t(3),r=t(4).each;i.prototype={constuctor:i,addHandler:function(t){t=new o(t);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var i=this.handlers;r(i,function(t,n){if(t.equals(e))return t.destroy(),!i.splice(n,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){r(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var n=this.matches()?"on":"off";r(this.handlers,function(t){t[n]()})}},n.exports=i},{3:3,4:4}],2:[function(t,n,e){function i(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}var o=t(1),t=t(4),r=t.each,s=t.isFunction,u=t.isArray;i.prototype={constructor:i,register:function(n,t,e){var i=this.queries,e=e&&this.browserIsIncapable;return i[n]||(i[n]=new o(n,e)),s(t)&&(t={match:t}),u(t)||(t=[t]),r(t,function(t){s(t)&&(t={match:t}),i[n].addHandler(t)}),this},unregister:function(t,n){var e=this.queries[t];return e&&(n?e.removeHandler(n):(e.clear(),delete this.queries[t])),this}},n.exports=i},{1:1,4:4}],3:[function(t,n,e){function i(t){(this.options=t).deferSetup||this.setup()}i.prototype={constructor:i,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){this.initialised||this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},n.exports=i},{}],4:[function(t,n,e){n.exports={isFunction:function(t){return"function"==typeof t},isArray:function(t){return"[object Array]"===Object.prototype.toString.apply(t)},each:function(t,n){for(var e=0,i=t.length;e<i&&!1!==n(t[e],e);e++);}}},{}],5:[function(t,n,e){t=t(2);n.exports=new t},{2:2}]},{},[5])(5)});
!function(n,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():n.NProgress=e()}(this,function(){var e,t,s={version:"0.2.0"},a=s.settings={minimum:.08,easing:"linear",positionUsing:"",speed:350,trickle:!0,trickleSpeed:250,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function u(n,e,t){return n<e?e:t<n?t:n}function c(n){return 100*(-1+n)}s.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(a[e]=t);return this},s.status=null,s.set=function(e){var n=s.isStarted(),t=(e=u(e,a.minimum,1),s.status=1===e?null:e,s.render(!n)),r=t.querySelector(a.barSelector),i=a.speed,o=a.easing;return t.offsetWidth,l(function(n){""===a.positionUsing&&(a.positionUsing=s.getPositioningCSS()),f(r,function(n,e,t){n="translate3d"===a.positionUsing?{transform:"translate3d("+c(n)+"%,0,0)"}:"translate"===a.positionUsing?{transform:"translate("+c(n)+"%,0)"}:{"margin-left":c(n)+"%"};return n.transition="all "+e+"ms "+t,n}(e,i,o)),1===e?(f(t,{transition:"none",opacity:1}),t.offsetWidth,setTimeout(function(){f(t,{transition:"all "+i+"ms linear",opacity:0}),setTimeout(function(){s.remove(),n()},i)},i)):setTimeout(n,i)}),this},s.isStarted=function(){return"number"==typeof s.status},s.start=function(){s.status||s.set(0);var n=function(){setTimeout(function(){s.status&&(s.trickle(),n())},a.trickleSpeed)};return a.trickle&&n(),this},s.done=function(n){return n||s.status?s.inc(.3+.5*Math.random()).set(1):this},s.inc=function(n){var e=s.status;return e?1<e?void 0:(e=u(e+(n="number"!=typeof n?0<=e&&e<.25?(3*Math.random()+3)/100:.25<=e&&e<.65?3*Math.random()/100:.65<=e&&e<.9?2*Math.random()/100:.9<=e&&e<.99?.005:0:n),0,.994),s.set(e)):s.start()},s.trickle=function(){return s.inc()},t=e=0,s.promise=function(n){return n&&"resolved"!==n.state()&&(0===t&&s.start(),e++,t++,n.always(function(){0===--t?(e=0,s.done()):s.set((e-t)/e)})),this},s.render=function(n){if(s.isRendered())return document.getElementById("nprogress");v(document.documentElement,"nprogress-busy");var e=document.createElement("div"),t=(e.id="nprogress",e.innerHTML=a.template,e.querySelector(a.barSelector)),n=n?"-100":c(s.status||0),r=document.querySelector(a.parent);return f(t,{transition:"all 0 linear",transform:"translate3d("+n+"%,0,0)"}),a.showSpinner||(t=e.querySelector(a.spinnerSelector))&&b(t),r!=document.body&&v(r,"nprogress-custom-parent"),r.appendChild(e),e},s.remove=function(){y(document.documentElement,"nprogress-busy"),y(document.querySelector(a.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&b(n)},s.isRendered=function(){return!!document.getElementById("nprogress")},s.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};r=[];var r,l=function(n){r.push(n),1==r.length&&i()};function i(){var n=r.shift();n&&n(i)}o=["Webkit","O","Moz","ms"],d={};var o,d,f=function(n,e){var t,r,i=arguments;if(2==i.length)for(t in e)void 0!==(r=e[t])&&e.hasOwnProperty(t)&&p(n,t,r);else p(n,i[1],i[2])};function m(n){return n=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(n,e){return e.toUpperCase()}),d[n]||(d[n]=function(n){var e=document.body.style;if(!(n in e))for(var t,r=o.length,i=n.charAt(0).toUpperCase()+n.slice(1);r--;)if((t=o[r]+i)in e)return t;return n}(n))}function p(n,e,t){e=m(e),n.style[e]=t}function g(n,e){return 0<=("string"==typeof n?n:h(n)).indexOf(" "+e+" ")}function v(n,e){var t=h(n),r=t+e;g(t,e)||(n.className=r.substring(1))}function y(n,e){var t=h(n);g(n,e)&&(t=t.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function h(n){return(" "+(n&&n.className||"")+" ").replace(/\s+/gi," ")}function b(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return s});
!function(){"use strict";function c(i,t){var e;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=i,this.tapDelay=t.tapDelay||200,this.tapTimeout=t.tapTimeout||700,!c.notNeeded(i)){for(var n=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,r=0,a=n.length;r<a;r++)o[n[r]]=function(t,e){return function(){return t.apply(e,arguments)}}(o[n[r]],o);s&&(i.addEventListener("mouseover",this.onMouse,!0),i.addEventListener("mousedown",this.onMouse,!0),i.addEventListener("mouseup",this.onMouse,!0)),i.addEventListener("click",this.onClick,!0),i.addEventListener("touchstart",this.onTouchStart,!1),i.addEventListener("touchmove",this.onTouchMove,!1),i.addEventListener("touchend",this.onTouchEnd,!1),i.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(i.removeEventListener=function(t,e,n){var o=Node.prototype.removeEventListener;"click"===t?o.call(i,t,e.hijacked||e,n):o.call(i,t,e,n)},i.addEventListener=function(t,e,n){var o=Node.prototype.addEventListener;"click"===t?o.call(i,t,e.hijacked||(e.hijacked=function(t){t.propagationStopped||e(t)}),n):o.call(i,t,e,n)}),"function"==typeof i.onclick&&(e=i.onclick,i.addEventListener("click",function(t){e(t)},!1),i.onclick=null)}}var t=0<=navigator.userAgent.indexOf("Windows Phone"),s=0<navigator.userAgent.indexOf("Android")&&!t,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,a=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),u=r&&/OS [6-7]_\d/.test(navigator.userAgent),o=0<navigator.userAgent.indexOf("BB10");c.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(r&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},c.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!s;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},c.prototype.sendClick=function(t,e){var n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),e=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},c.prototype.determineEventType=function(t){return s&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},c.prototype.focus=function(t){var e;r&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},c.prototype.updateScrollParent=function(t){var e,n=t.fastClickScrollParent;if(!n||!n.contains(t)){e=t;do{if(e.scrollHeight>e.offsetHeight){n=e,t.fastClickScrollParent=e;break}}while(e=e.parentElement)}n&&(n.fastClickLastScrollTop=n.scrollTop)},c.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},c.prototype.onTouchStart=function(t){var e,n,o;if(!(1<t.targetTouches.length)){if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],r){if((o=window.getSelection()).rangeCount&&!o.isCollapsed)return!0;if(!a){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault()}return!0},c.prototype.touchHasMoved=function(t){var t=t.changedTouches[0],e=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>e||Math.abs(t.pageY-this.touchStartY)>e},c.prototype.onTouchMove=function(t){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0},c.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},c.prototype.onTouchEnd=function(t){var e,n,o,i=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,e=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,u&&(o=t.changedTouches[0],(i=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||i).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(o=i.tagName.toLowerCase())){if(n=this.findControl(i)){if(this.focus(i),s)return!1;i=n}}else if(this.needsFocus(i))return 100<t.timeStamp-e||r&&window.top!==window&&"input"===o?this.targetElement=null:(this.focus(i),this.sendClick(i,t),r&&"select"===o||(this.targetElement=null,t.preventDefault())),!1;return!(!r||a||!(n=i.fastClickScrollParent)||n.fastClickLastScrollTop===n.scrollTop)||(this.needsClick(i)||(t.preventDefault(),this.sendClick(i,t)),!1)},c.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},c.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},c.prototype.onClick=function(t){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===t.target.type&&0===t.detail||((t=this.onMouse(t))||(this.targetElement=null),t)},c.prototype.destroy=function(){var t=this.layer;s&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},c.notNeeded=function(t){var e,n;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!s)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(31<n&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&10<=(n=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=n[2]&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},c.attach=function(t,e){return new c(t,e)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return c}):"undefined"!=typeof module&&module.exports?(module.exports=c.attach,module.exports.FastClick=c):window.FastClick=c}();
!function(r){r.fn.isOnScreen=function(t,o){null!=t&&void 0!==t||(t=1),null!=o&&void 0!==o||(o=1);var i,h,e=r(window),l={top:e.scrollTop(),left:e.scrollLeft()},e=(l.right=l.left+e.width(),l.bottom=l.top+e.height(),this.outerHeight()),n=this.outerWidth();return!(!n||!e)&&((i=this.offset()).right=i.left+n,i.bottom=i.top+e,!(l.right<i.left||l.left>i.right||l.bottom<i.top||l.top>i.bottom)&&(h=Math.min(1,(i.bottom-l.top)/e),e=Math.min(1,(l.bottom-i.top)/e),t<=Math.min(1,(i.right-l.left)/n)*Math.min(1,(l.right-i.left)/n)&&o<=h*e))}}(jQuery);
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";return function(p,_,t,z){function e(){return{x:0,y:0}}function N(e,t){y.extend(x,t.publicMethods),We.push(e)}function U(e){var t=Z();return t-1<e?e-t:e<0?t+e:e}function a(e,t){return Ve[e]||(Ve[e]=[]),Ve[e].push(t)}function H(e,t,n,i){i===x.currItem.initialZoomLevel?n[e]=x.currItem.initialPosition[e]:(n[e]=Je(e,i),n[e]>t.min[e]?n[e]=t.min[e]:n[e]<t.max[e]&&(n[e]=t.max[e]))}function Y(e){var t="";g.escKey&&27===e.keyCode?t="close":g.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),!t||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,x[t]())}function B(e){e&&(Se||Te||h||Ce)&&(e.preventDefault(),e.stopPropagation())}function W(){x.setScrollOffset(0,y.getScrollY())}function G(e){var t;"mousedown"===e.type&&0<e.button||(Jt?e.preventDefault():De&&"mousedown"===e.type||(Ot(e,!0)&&e.preventDefault(),C("pointerDown"),pe&&((t=y.arraySearch(ft,e.pointerId,"id"))<0&&(t=ft.length),ft[t]={x:e.pageX,y:e.pageY,id:e.pointerId}),e=(t=zt(e)).length,c=null,st(),s&&1!==e||(s=Ze=!0,y.bind(window,Q,x),Ie=Le=Pe=Ce=Ee=Se=Me=Te=!1,Re=null,C("firstTouchStart",t),S(Ue,v),Ne.x=Ne.y=0,S(k,t[0]),S(mt,k),ht.x=b.x*He,yt=[{x:k.x,y:k.y}],we=ve=D(),nt(f,!0),Mt(),Tt()),!u&&1<e&&!h&&!Ee&&(te=f,u=Me=!(Te=!1),Ne.y=Ne.x=0,S(Ue,v),S(E,t[0]),S(pt,t[1]),Rt(E,pt,It),bt.x=Math.abs(It.x)-v.x,bt.y=Math.abs(It.y)-v.y,Oe=Dt(E,pt))))}function X(e){var t;e.preventDefault(),pe&&-1<(t=y.arraySearch(ft,e.pointerId,"id"))&&((t=ft[t]).x=e.pageX,t.y=e.pageY),s&&(t=zt(e),Re||Se||u?c=t:R.x!==b.x*He?Re="h":(e=Math.abs(t[0].x-k.x)-Math.abs(t[0].y-k.y),Math.abs(e)>=dt&&(Re=0<e?"h":"v",c=t)))}function V(e){if(l.isOldAndroid){if(De&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(De),De=setTimeout(function(){De=0},600))}C("pointerUp"),Ot(e,!1)&&e.preventDefault(),pe&&-1<(a=y.arraySearch(ft,e.pointerId,"id"))&&(t=ft.splice(a,1)[0],!navigator.pointerEnabled&&(t.type={4:"mouse",2:"touch",3:"pen"}[e.pointerType],t.type)||(t.type=e.pointerType||"mouse"));var t,n=(a=zt(e)).length;if(2===(n="mouseup"===e.type?0:n))return!(c=null);1===n&&S(mt,a[0]),0!==n||Re||h||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),C("touchRelease",e,t));var i,o,a=-1;if(0===n&&(s=!1,y.unbind(window,Q,x),Mt(),u?a=0:-1!==wt&&(a=D()-wt)),wt=1===n?D():-1,e=-1!==a&&a<150?"zoom":"swipe",u&&n<2&&(u=!1,1===n&&(e="zoomPointerUp"),C("zoomGestureEnded")),c=null,Se||Te||h||Ce)if(st(),(be=be||Ht()).calculateSwipeSpeed("x"),Ce)Pt()<g.verticalDragRange?x.close():(i=v.y,o=Fe,ct("verticalDrag",0,1,300,y.easing.cubic.out,function(e){v.y=(x.currItem.initialPosition.y-i)*e+i,M((1-o)*e+o),T()}),C("onVerticalDrag",1));else{if((Ee||h)&&0===n){if(Bt(e,be))return;e="zoomPointerUp"}h||("swipe"!==e?Gt():!Ee&&f>x.currItem.fitRatio&&Yt(be))}}var K,q,$,m,j,J,Q,ee,i,f,te,ne,ie,oe,ae,r,re,le,se,ce,ue,de,pe,o,me,fe,he,ye,xe,ge,l,ve,we,be,Ie,Ce,De,s,Me,Te,Se,Ae,Ee,c,u,Oe,d,ke,h,Re,Ze,Pe,Fe,Le,_e,y={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){t=document.createElement(t||"div");return e&&(t.className=e),t},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){y.bind(e,t,n,!0)},removeClass:function(e,t){t=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(t," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){y.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(y.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)!t.hasOwnProperty(i)||n&&e.hasOwnProperty(i)||(e[i]=t[i])},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(y.features)return y.features;for(var e,t,n,i,o,a=y.createEl().style,r="",l={},s=(l.oldIE=document.all&&!document.addEventListener,l.touch="ontouchstart"in window,window.requestAnimationFrame&&(l.raf=window.requestAnimationFrame,l.caf=window.cancelAnimationFrame),l.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,l.pointerEvent||(e=navigator.userAgent,/iP(hone|od)/.test(navigator.platform)&&(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))&&0<t.length&&1<=(t=parseInt(t[1],10))&&t<8&&(l.isOldIOSPhone=!0),t=(t=e.match(/Android\s([0-9\.]*)/))?t[1]:0,1<=(t=parseFloat(t))&&(t<4.4&&(l.isOldAndroid=!0),l.androidVersion=t),l.isMobileOpera=/opera mini|opera mobi/i.test(e)),["transform","perspective","animationName"]),c=["","webkit","Moz","ms","O"],u=0;u<4;u++){for(var r=c[u],d=0;d<3;d++)n=s[d],i=r+(r?n.charAt(0).toUpperCase()+n.slice(1):n),!l[n]&&i in a&&(l[n]=i);r&&!l.raf&&(r=r.toLowerCase(),l.raf=window[r+"RequestAnimationFrame"],l.raf&&(l.caf=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]))}return l.raf||(o=0,l.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-o)),i=window.setTimeout(function(){e(t+n)},n);return o=t+n,i},l.caf=function(e){clearTimeout(e)}),l.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,y.features=l}},x=(y.detectFeatures(),y.features.oldIE&&(y.bind=function(e,t,n,i){t=t.split(" ");for(var o,a=(i?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)}),this),ze=25,g={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"},Ne=(y.extend(g,z),e()),Ue=e(),v=e(),w={},He=0,Ye={},b=e(),I=0,Be=!0,We=[],Ge={},Xe=!1,Ve={},C=function(e){var t=Ve[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(x,n)}},D=function(){return(new Date).getTime()},M=function(e){Fe=e,x.bg.style.opacity=e*g.bgOpacity},Ke=function(e,t,n,i,o){(!Xe||o&&o!==x.currItem)&&(i/=(o||x.currItem).fitRatio),e[de]=ne+t+"px, "+n+"px"+ie+" scale("+i+")"},T=function(e){ke&&(e&&(f>x.currItem.fitRatio?Xe||(sn(x.currItem,!1,!0),Xe=!0):Xe&&(sn(x.currItem),Xe=!1)),Ke(ke,v.x,v.y,f))},qe=function(e){e.container&&Ke(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},$e=function(e,t){t[de]=ne+e+"px, 0px"+ie},je=function(e,t){var n;!g.loop&&t&&(t=m+(b.x*He-e)/b.x,n=Math.round(e-R.x),(t<0&&0<n||t>=Z()-1&&n<0)&&(e=R.x+n*g.mainScrollEndFriction)),R.x=e,$e(e,j)},Je=function(e,t){var n=bt[e]-Ye[e];return Ue[e]+Ne[e]+n-t/te*n},S=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Qe=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},et=null,tt=function(){et&&(y.unbind(document,"mousemove",tt),y.addClass(p,"pswp--has_mouse"),g.mouseUsed=!0,C("mouseUsed")),et=setTimeout(function(){et=null},100)},nt=function(e,t){e=rn(x.currItem,w,e);return t&&(d=e),e},it=function(e){return(e=e||x.currItem).initialZoomLevel},ot=function(e){return 0<(e=e||x.currItem).w?g.maxSpreadZoom:1},A={},at=0,rt=function(e){A[e]&&(A[e].raf&&fe(A[e].raf),at--,delete A[e])},lt=function(e){A[e]&&rt(e),A[e]||(at++,A[e]={})},st=function(){for(var e in A)A.hasOwnProperty(e)&&rt(e)},ct=function(e,t,n,i,o,a,r){function l(){A[e]&&(s=D()-c,i<=s?(rt(e),a(n),r&&r()):(a((n-t)*o(s/i)+t),A[e].raf=me(l)))}var s,c=D();lt(e);l()},z={shout:C,listen:a,viewportSize:w,options:g,isMainScrollAnimating:function(){return h},getZoomLevel:function(){return f},getCurrentIndex:function(){return m},isDragging:function(){return s},isZooming:function(){return u},setScrollOffset:function(e,t){Ye.x=e,ge=Ye.y=t,C("updateScrollOffset",Ye)},applyZoomPan:function(e,t,n,i){v.x=t,v.y=n,f=e,T(i)},init:function(){if(!K&&!q){x.framework=y,x.template=p,x.bg=y.getChildByClass(p,"pswp__bg"),he=p.className,K=!0,l=y.detectFeatures(),me=l.raf,fe=l.caf,de=l.transform,xe=l.oldIE,x.scrollWrap=y.getChildByClass(p,"pswp__scroll-wrap"),x.container=y.getChildByClass(x.scrollWrap,"pswp__container"),j=x.container.style,x.itemHolders=r=[{el:x.container.children[0],wrap:0,index:-1},{el:x.container.children[1],wrap:0,index:-1},{el:x.container.children[2],wrap:0,index:-1}],r[0].el.style.display=r[2].el.style.display="none",de?(t=l.perspective&&!o,ne="translate"+(t?"3d(":"("),ie=l.perspective?", 0px)":")"):(de="left",y.addClass(p,"pswp--ie"),$e=function(e,t){t.left=e+"px"},qe=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,t=t*e.h;n.width=i+"px",n.height=t+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},T=function(){var e,t,n,i;ke&&(e=ke,n=(i=1<(t=x.currItem).fitRatio?1:t.fitRatio)*t.w,i=i*t.h,e.width=n+"px",e.height=i+"px",e.left=v.x+"px",e.top=v.y+"px")}),i={resize:x.updateSize,scroll:W,keydown:Y,click:B};var e,t=l.isOldIOSPhone||l.isOldAndroid||l.isMobileOpera;for(l.animationName&&l.transform&&!t||(g.showAnimationDuration=g.hideAnimationDuration=0),e=0;e<We.length;e++)x["init"+We[e]]();_&&(x.ui=new _(x,y)).init(),C("firstUpdate"),m=m||g.index||0,(isNaN(m)||m<0||m>=Z())&&(m=0),x.currItem=Qt(m),(l.isOldIOSPhone||l.isOldAndroid)&&(Be=!1),p.setAttribute("aria-hidden","false"),g.modal&&(Be?p.style.position="fixed":(p.style.position="absolute",p.style.top=y.getScrollY()+"px")),void 0===ge&&(C("initialLayout"),ge=ye=y.getScrollY());var n="pswp--open ";for(g.mainClass&&(n+=g.mainClass+" "),g.showHideOpacity&&(n+="pswp--animate_opacity "),n=(n=(n+=o?"pswp--touch":"pswp--notouch")+(l.animationName?" pswp--css_animation":""))+(l.svg?" pswp--svg":""),y.addClass(p,n),x.updateSize(),J=-1,I=null,e=0;e<3;e++)$e((e+J)*b.x,r[e].el.style);xe||y.bind(x.scrollWrap,ee,x),a("initialZoomInEnd",function(){x.setContent(r[0],m-1),x.setContent(r[2],m+1),r[0].el.style.display=r[2].el.style.display="block",g.focus&&p.focus(),y.bind(document,"keydown",x),l.transform&&y.bind(x.scrollWrap,"click",x),g.mouseUsed||y.bind(document,"mousemove",tt),y.bind(window,"resize scroll",x),C("bindEvents")}),x.setContent(r[1],m),x.updateCurrItem(),C("afterInit"),Be||(oe=setInterval(function(){at||s||u||f!==x.currItem.initialZoomLevel||x.updateSize()},1e3)),y.addClass(p,"pswp--visible")}},close:function(){K&&(q=!(K=!1),C("close"),y.unbind(window,"resize",x),y.unbind(window,"scroll",i.scroll),y.unbind(document,"keydown",x),y.unbind(document,"mousemove",tt),l.transform&&y.unbind(x.scrollWrap,"click",x),s&&y.unbind(window,Q,x),C("unbindEvents"),en(x.currItem,null,!0,x.destroy))},destroy:function(){C("destroy"),qt&&clearTimeout(qt),p.setAttribute("aria-hidden","true"),p.className=he,oe&&clearInterval(oe),y.unbind(x.scrollWrap,ee,x),y.unbind(window,"scroll",x),Mt(),st(),Ve=null},panTo:function(e,t,n){n||(e>d.min.x?e=d.min.x:e<d.max.x&&(e=d.max.x),t>d.min.y?t=d.min.y:t<d.max.y&&(t=d.max.y)),v.x=e,v.y=t,T()},handleEvent:function(e){e=e||window.event,i[e.type]&&i[e.type](e)},goTo:function(e){var t=(e=U(e))-m;I=t,m=e,x.currItem=Qt(m),He-=t,je(b.x*He),st(),h=!1,x.updateCurrItem()},next:function(){x.goTo(m+1)},prev:function(){x.goTo(m-1)},updateCurrZoomItem:function(e){var t;e&&C("beforeChange",0),ke=r[1].el.children.length&&(t=r[1].el.children[0],y.hasClass(t,"pswp__zoom-wrap"))?t.style:null,d=x.currItem.bounds,te=f=x.currItem.initialZoomLevel,v.x=d.center.x,v.y=d.center.y,e&&C("afterChange")},invalidateCurrItems:function(){ae=!0;for(var e=0;e<3;e++)r[e].item&&(r[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==I){var t,n=Math.abs(I);if(!(e&&n<2)){x.currItem=Qt(m),Xe=!1,C("beforeChange",I),3<=n&&(J+=I+(0<I?-3:3),n=3);for(var i=0;i<n;i++)0<I?(t=r.shift(),r[2]=t,$e((++J+2)*b.x,t.el.style),x.setContent(t,m-n+i+1+1)):(t=r.pop(),r.unshift(t),$e(--J*b.x,t.el.style),x.setContent(t,m+n-i-1-1));!ke||1!==Math.abs(I)||(e=Qt(re)).initialZoomLevel!==f&&(rn(e,w),sn(e),qe(e)),I=0,x.updateCurrZoomItem(),re=m,C("afterChange")}}},updateSize:function(e){if(!Be&&g.modal){var t=y.getScrollY();if(ge!==t&&(p.style.top=t+"px",ge=t),!e&&Ge.x===window.innerWidth&&Ge.y===window.innerHeight)return;Ge.x=window.innerWidth,Ge.y=window.innerHeight,p.style.height=Ge.y+"px"}if(w.x=x.scrollWrap.clientWidth,w.y=x.scrollWrap.clientHeight,W(),b.x=w.x+Math.round(w.x*g.spacing),b.y=w.y,je(b.x*He),C("beforeResize"),void 0!==J){for(var n,i,o,a=0;a<3;a++)n=r[a],$e((a+J)*b.x,n.el.style),o=m+a-1,g.loop&&2<Z()&&(o=U(o)),(i=Qt(o))&&(ae||i.needsUpdate||!i.bounds)?(x.cleanSlide(i),x.setContent(n,o),1===a&&(x.currItem=i,x.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===n.index&&0<=o&&x.setContent(n,o),i&&i.container&&(rn(i,w),sn(i),qe(i));ae=!1}te=f=x.currItem.initialZoomLevel,(d=x.currItem.bounds)&&(v.x=d.center.x,v.y=d.center.y,T(!0)),C("resize")},zoomTo:function(t,e,n,i,o){e&&(te=f,bt.x=Math.abs(e.x)-v.x,bt.y=Math.abs(e.y)-v.y,S(Ue,v));function a(e){1===e?(f=t,v.x=r.x,v.y=r.y):(f=(t-l)*e+l,v.x=(r.x-s.x)*e+s.x,v.y=(r.y-s.y)*e+s.y),o&&o(e),T(1===e)}var e=nt(t,!1),r={},l=(H("x",e,r,t),H("y",e,r,t),f),s={x:v.x,y:v.y};Qe(r);n?ct("customZoomTo",0,1,n,i||y.easing.sine.inOut,a):a(1)}},ut=30,dt=10,E={},pt={},O={},k={},mt={},ft=[],ht={},yt=[],xt={},gt=0,vt=e(),wt=0,R=e(),bt=e(),It=e(),Ct=function(e,t){return e.x===t.x&&e.y===t.y},Dt=function(e,t){return xt.x=Math.abs(e.x-t.x),xt.y=Math.abs(e.y-t.y),Math.sqrt(xt.x*xt.x+xt.y*xt.y)},Mt=function(){Ae&&(fe(Ae),Ae=null)},Tt=function(){s&&(Ae=me(Tt),Ut())},St=function(){return!("fit"===g.scaleMode&&f===x.currItem.initialZoomLevel)},At=function(e,t){return!(!e||e===document)&&(!(e.getAttribute("class")&&-1<e.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(t(e)?e:At(e.parentNode,t)))},Et={},Ot=function(e,t){return Et.prevent=!At(e.target,g.isClickableElement),C("preventDragEvent",e,t,Et),Et.prevent},kt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Rt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Zt=function(e,t,n){var i;50<e-we&&((i=2<yt.length?yt.shift():{}).x=t,i.y=n,yt.push(i),we=e)},Pt=function(){var e=v.y-x.currItem.initialPosition.y;return 1-Math.abs(e/(w.y/2))},Ft={},Lt={},_t=[],zt=function(e){for(;0<_t.length;)_t.pop();return pe?(_e=0,ft.forEach(function(e){0===_e?_t[0]=e:1===_e&&(_t[1]=e),_e++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(_t[0]=kt(e.touches[0],Ft),1<e.touches.length&&(_t[1]=kt(e.touches[1],Lt))):(Ft.x=e.pageX,Ft.y=e.pageY,Ft.id="",_t[0]=Ft),_t},Nt=function(e,t){var n,i,o,a=v[e]+t[e],r=0<t[e],l=R.x+t.x,s=R.x-ht.x,c=a>d.min[e]||a<d.max[e]?g.panEndFriction:1,a=v[e]+t[e]*c;if((g.allowPanToNext||f===x.currItem.initialZoomLevel)&&(ke?"h"!==Re||"x"!==e||Te||(r?(a>d.min[e]&&(c=g.panEndFriction,d.min[e],n=d.min[e]-Ue[e]),(n<=0||s<0)&&1<Z()?(o=l,s<0&&l>ht.x&&(o=ht.x)):d.min.x!==d.max.x&&(i=a)):(a<d.max[e]&&(c=g.panEndFriction,d.max[e],n=Ue[e]-d.max[e]),(n<=0||0<s)&&1<Z()?(o=l,0<s&&l<ht.x&&(o=ht.x)):d.min.x!==d.max.x&&(i=a))):o=l,"x"===e))return void 0!==o&&(je(o,!0),Ee=o!==ht.x),d.min.x!==d.max.x&&(void 0!==i?v.x=i:Ee||(v.x+=t.x*c)),void 0!==o;h||Ee||f>x.currItem.fitRatio&&(v[e]+=t[e]*c)},Ut=function(){if(c){var e,t,n,i,o,a=c.length;if(0!==a)if(S(E,c[0]),O.x=E.x-k.x,O.y=E.y-k.y,u&&1<a)k.x=E.x,k.y=E.y,!O.x&&!O.y&&Ct(c[1],pt)||(S(pt,c[1]),Te||(Te=!0,C("zoomGestureStarted")),a=Dt(E,pt),(e=Wt(a))>x.currItem.initialZoomLevel+x.currItem.initialZoomLevel/15&&(Le=!0),t=1,n=it(),i=ot(),e<n?g.pinchToClose&&!Le&&te<=x.currItem.initialZoomLevel?(M(o=1-(n-e)/(n/1.2)),C("onPinchClose",o),Pe=!0):e=n-(t=1<(t=(n-e)/n)?1:t)*(n/3):i<e&&(e=i+(t=1<(t=(e-i)/(6*n))?1:t)*n),t<0&&(t=0),Rt(E,pt,vt),Ne.x+=vt.x-It.x,Ne.y+=vt.y-It.y,S(It,vt),v.x=Je("x",e),v.y=Je("y",e),Ie=f<e,f=e,T());else if(Re&&(Ze&&(Ze=!1,Math.abs(O.x)>=dt&&(O.x-=c[0].x-mt.x),Math.abs(O.y)>=dt&&(O.y-=c[0].y-mt.y)),k.x=E.x,k.y=E.y,0!==O.x||0!==O.y)){if("v"===Re&&g.closeOnVerticalDrag)if(!St())return Ne.y+=O.y,v.y+=O.y,o=Pt(),Ce=!0,C("onVerticalDrag",o),M(o),void T();Zt(D(),E.x,E.y),Se=!0,d=x.currItem.bounds,Nt("x",O)||(Nt("y",O),Qe(v),T())}}},Ht=function(){var t,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){n=(1<yt.length?(t=D()-we+50,yt[yt.length-2]):(t=D()-ve,mt))[e],i.lastFlickOffset[e]=k[e]-n,i.lastFlickDist[e]=Math.abs(i.lastFlickOffset[e]),20<i.lastFlickDist[e]?i.lastFlickSpeed[e]=i.lastFlickOffset[e]/t:i.lastFlickSpeed[e]=0,Math.abs(i.lastFlickSpeed[e])<.1&&(i.lastFlickSpeed[e]=0),i.slowDownRatio[e]=.95,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],i.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(t,e){i.backAnimStarted[t]||(v[t]>d.min[t]?i.backAnimDestination[t]=d.min[t]:v[t]<d.max[t]&&(i.backAnimDestination[t]=d.max[t]),void 0!==i.backAnimDestination[t]&&(i.slowDownRatio[t]=.7,i.slowDownRatioReverse[t]=1-i.slowDownRatio[t],i.speedDecelerationRatioAbs[t]<.05&&(i.lastFlickSpeed[t]=0,i.backAnimStarted[t]=!0,ct("bounceZoomPan"+t,v[t],i.backAnimDestination[t],e||300,y.easing.sine.out,function(e){v[t]=e,T()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]=i.speedDecelerationRatio[e]*(i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10),i.speedDecelerationRatioAbs[e]=Math.abs(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,v[e]+=i.distanceOffset[e])},panAnimLoop:function(){A.zoomPan&&(A.zoomPan.raf=me(i.panAnimLoop),i.now=D(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset("x"),i.calculateAnimOffset("y"),T(),i.calculateOverBoundsAnimOffset("x"),i.calculateOverBoundsAnimOffset("y"),i.speedDecelerationRatioAbs.x<.05&&i.speedDecelerationRatioAbs.y<.05&&(v.x=Math.round(v.x),v.y=Math.round(v.y),T(),rt("zoomPan")))}};return i},Yt=function(e){if(e.calculateSwipeSpeed("y"),d=x.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;lt("zoomPan"),e.lastNow=D(),e.panAnimLoop()},Bt=function(e,t){h||(gt=m),"swipe"===e&&(e=k.x-mt.x,a=t.lastFlickDist.x<10,ut<e&&(a||20<t.lastFlickOffset.x)?i=-1:e<-ut&&(a||t.lastFlickOffset.x<-20)&&(i=1)),i&&((m+=i)<0?(m=g.loop?Z()-1:0,o=!0):m>=Z()&&(m=g.loop?0:Z()-1,o=!0),o&&!g.loop||(I+=i,He-=i,n=!0));var n,i,o,e=b.x*He,a=Math.abs(e-R.x),r=n||e>R.x==0<t.lastFlickSpeed.x?(r=0<Math.abs(t.lastFlickSpeed.x)?a/Math.abs(t.lastFlickSpeed.x):333,r=Math.min(r,400),Math.max(r,250)):333;return gt===m&&(n=!1),h=!0,C("mainScrollAnimStart"),ct("mainScroll",R.x,e,r,y.easing.cubic.out,je,function(){st(),h=!1,gt=-1,!n&&gt===m||x.updateCurrItem(),C("mainScrollAnimComplete")}),n&&x.updateCurrItem(!0),n},Wt=function(e){return 1/Oe*e*te},Gt=function(){var e,t=f,n=it(),i=ot(),o=(f<n?t=n:i<f&&(t=i),Fe);return Pe&&!Ie&&!Le&&f<n?x.close():(Pe&&(e=function(e){M((1-o)*e+o)}),x.zoomTo(t,0,200,y.easing.cubic.out,e)),!0};N("Gestures",{publicMethods:{initGestures:function(){function e(e,t,n,i,o){le=e+t,se=e+n,ce=e+i,ue=o?e+o:""}(pe=l.pointerEvent)&&l.touch&&(l.touch=!1),pe?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):l.touch?(e("touch","start","move","end","cancel"),o=!0):e("mouse","down","move","up"),Q=se+" "+ce+" "+ue,ee=le,pe&&!o&&(o=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),x.likelyTouchDevice=o,i[le]=G,i[se]=X,i[ce]=V,ue&&(i[ue]=i[ce]),l.touch&&(ee+=" mousedown",Q+=" mousemove mouseup",i.mousedown=i[le],i.mousemove=i[se],i.mouseup=i[ce]),o||(g.allowPanToNext=!1)}}});function Xt(e){function t(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,n.onload=n.onerror=null,n=null}e.loading=!0,e.loaded=!1;var n=e.img=y.createEl("pswp__img","img");n.onload=t,n.onerror=function(){e.loadError=!0,t()},n.src=e.src}function Vt(e,t){return e.src&&e.loadError&&e.container&&(t&&(e.container.innerHTML=""),e.container.innerHTML=g.errorMsg.replace("%url%",e.src),1)}function Kt(){if(tn.length){for(var e,t=0;t<tn.length;t++)(e=tn[t]).holder.index===e.index&&ln(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);tn=[]}}var qt,$t,jt,Jt,Qt,Z,en=function(a,e,r,t){function l(){rt("initialZoom"),r?(x.template.removeAttribute("style"),x.bg.removeAttribute("style")):(M(1),e&&(e.style.display="block"),y.addClass(p,"pswp--animated-in"),C("initialZoom"+(r?"OutEnd":"InEnd"))),t&&t(),Jt=!1}qt&&clearTimeout(qt),jt=Jt=!0,a.initialLayout?(s=a.initialLayout,a.initialLayout=null):s=g.getThumbBoundsFn&&g.getThumbBoundsFn(m);var s,c,u,d=r?g.hideAnimationDuration:g.showAnimationDuration;d&&s&&void 0!==s.x?(c=$,u=!x.currItem.src||x.currItem.loadError||g.showHideOpacity,a.miniImg&&(a.miniImg.style.webkitBackfaceVisibility="hidden"),r||(f=s.w/a.w,v.x=s.x,v.y=s.y-ye,x[u?"template":"bg"].style.opacity=.001,T()),lt("initialZoom"),r&&!c&&y.removeClass(p,"pswp--animated-in"),u&&(r?y[(c?"remove":"add")+"Class"](p,"pswp--animate_opacity"):setTimeout(function(){y.addClass(p,"pswp--animate_opacity")},30)),qt=setTimeout(function(){var t,n,i,o,e;C("initialZoom"+(r?"Out":"In")),r?(t=s.w/a.w,n={x:v.x,y:v.y},i=f,o=Fe,e=function(e){1===e?(f=t,v.x=s.x,v.y=s.y-ge):(f=(t-i)*e+i,v.x=(s.x-n.x)*e+n.x,v.y=(s.y-ge-n.y)*e+n.y),T(),u?p.style.opacity=1-e:M(o-e*o)},c?ct("initialZoom",0,1,d,y.easing.cubic.out,e,l):(e(1),qt=setTimeout(l,d+20))):(f=a.initialZoomLevel,S(v,a.initialPosition),T(),M(1),u?p.style.opacity=1:M(1),qt=setTimeout(l,d+20))},r?25:90)):(C("initialZoom"+(r?"Out":"In")),f=a.initialZoomLevel,S(v,a.initialPosition),T(),p.style.opacity=r?0:1,M(1),d?setTimeout(function(){l()},d):l())},P={},tn=[],nn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return $t.length}},on=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(e,t,n){var i=e.bounds;i.center.x=Math.round((P.x-t)/2),i.center.y=Math.round((P.y-n)/2)+e.vGap.top,i.max.x=t>P.x?Math.round(P.x-t):i.center.x,i.max.y=n>P.y?Math.round(P.y-n)+e.vGap.top:i.center.y,i.min.x=t>P.x?0:i.center.x,i.min.y=n>P.y?e.vGap.top:i.center.y},rn=function(e,t,n){var i,o;return!e.src||e.loadError?(e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=on(),e.initialPosition=e.bounds.center,e.bounds):((i=!n)&&(e.vGap||(e.vGap={top:0,bottom:0}),C("parseVerticalMargin",e)),P.x=t.x,P.y=t.y-e.vGap.top-e.vGap.bottom,i&&(t=P.x/e.w,o=P.y/e.h,e.fitRatio=t<o?t:o,"orig"===(t=g.scaleMode)?n=1:"fit"===t&&(n=e.fitRatio),e.initialZoomLevel=n=1<n?1:n,e.bounds||(e.bounds=on())),n?(an(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0)},ln=function(e,t,n,i,o,a){t.loadError||i&&(t.imageAppended=!0,sn(t,i,t===x.currItem&&Xe),n.appendChild(i),a&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},sn=function(e,t,n){var i;e.src&&(t=t||e.container.lastChild,i=n?e.w:Math.round(e.w*e.fitRatio),n=n?e.h:Math.round(e.h*e.fitRatio),e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=n+"px"),t.style.width=i+"px",t.style.height=n+"px")};N("Controller",{publicMethods:{lazyLoadItem:function(e){e=U(e);var t=Qt(e);t&&(!t.loaded&&!t.loading||ae)&&(C("gettingData",e,t),t.src&&Xt(t))},initController:function(){y.extend(g,nn,!0),x.items=$t=t,Qt=x.getItemAt,Z=g.getNumItemsFn,g.loop,Z()<3&&(g.loop=!1),a("beforeChange",function(e){for(var t=g.preload,n=null===e||0<=e,i=Math.min(t[0],Z()),o=Math.min(t[1],Z()),a=1;a<=(n?o:i);a++)x.lazyLoadItem(m+a);for(a=1;a<=(n?i:o);a++)x.lazyLoadItem(m-a)}),a("initialLayout",function(){x.currItem.initialLayout=g.getThumbBoundsFn&&g.getThumbBoundsFn(m)}),a("mainScrollAnimComplete",Kt),a("initialZoomInEnd",Kt),a("destroy",function(){for(var e,t=0;t<$t.length;t++)(e=$t[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);tn=null})},getItemAt:function(e){return 0<=e&&(void 0!==$t[e]&&$t[e])},allowProgressiveImg:function(){return g.forceProgressiveLoading||!o||g.mouseUsed||1200<screen.width},setContent:function(t,n){g.loop&&(n=U(n));var e,i,o,a=x.getItemAt(t.index),a=(a&&(a.container=null),x.getItemAt(n));a?(C("gettingData",n,a),t.index=n,i=(t.item=a).container=y.createEl("pswp__zoom-wrap"),!a.src&&a.html&&(a.html.tagName?i.appendChild(a.html):i.innerHTML=a.html),Vt(a),rn(a,w),!a.src||a.loadError||a.loaded?a.src&&!a.loadError&&((e=y.createEl("pswp__img","img")).style.opacity=1,e.src=a.src,sn(a,e),ln(n,a,i,e,!0)):(a.loadComplete=function(e){if(K){if(t&&t.index===n){if(Vt(e,!0))return e.loadComplete=e.img=null,rn(e,w),qe(e),void(t.index===m&&x.updateCurrZoomItem());e.imageAppended?!Jt&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):l.transform&&(h||Jt)?tn.push({item:e,baseDiv:i,img:e.img,index:n,holder:t,clearPlaceholder:!0}):ln(n,e,i,e.img,h||Jt,!0)}e.loadComplete=null,e.img=null,C("imageLoadComplete",n,e)}},y.features.transform&&(o="pswp__img pswp__img--placeholder",o+=a.msrc?"":" pswp__img--placeholder--blank",o=y.createEl(o,a.msrc?"img":""),a.msrc&&(o.src=a.msrc),sn(a,o),i.appendChild(o),a.placeholder=o),a.loading||Xt(a),x.allowProgressiveImg()&&(!jt&&l.transform?tn.push({item:a,baseDiv:i,img:a.img,index:n,holder:t}):ln(n,a,i,a.img,!0,!0))),jt||n!==m?qe(a):(ke=i.style,en(a,e||a.img)),t.el.innerHTML="",t.el.appendChild(i)):t.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});function cn(e,t,n){var i=document.createEvent("CustomEvent"),t={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,t),e.target.dispatchEvent(i)}function un(){mn&&clearTimeout(mn),hn&&clearTimeout(hn)}function dn(){var e=Mn(),t={};if(!(e.length<5)){var n,i=e.split("&");for(a=0;a<i.length;a++)i[a]&&((n=i[a].split("=")).length<2||(t[n[0]]=n[1]));if(g.galleryPIDs){for(var o=t.pid,a=t.pid=0;a<$t.length;a++)if($t[a].pid===o){t.pid=a;break}}else t.pid=parseInt(t.pid,10)-1;t.pid<0&&(t.pid=0)}return t}var pn,F,mn,fn,hn,yn,xn,gn,n,vn,wn,bn,L,In,Cn={},Dn=(N("Tap",{publicMethods:{initTap:function(){a("firstTouchStart",x.onTapStart),a("touchRelease",x.onTapRelease),a("destroy",function(){Cn={},pn=null})},onTapStart:function(e){1<e.length&&(clearTimeout(pn),pn=null)},onTapRelease:function(e,t){var n,i,o;!t||Se||Me||at||(n=t,pn&&(clearTimeout(pn),pn=null,i=n,o=Cn,Math.abs(i.x-o.x)<ze&&Math.abs(i.y-o.y)<ze)?C("doubleTap",n):"mouse"===t.type?cn(e,t,"mouse"):"BUTTON"===e.target.tagName.toUpperCase()||y.hasClass(e.target,"pswp__single-tap")?cn(e,t):(S(Cn,n),pn=setTimeout(function(){cn(e,t),pn=null},300)))}}}),N("DesktopZoom",{publicMethods:{initDesktopZoom:function(){xe||(o?a("mouseUsed",function(){x.setupDesktopZoom()}):x.setupDesktopZoom(!0))},setupDesktopZoom:function(e){F={};var t="wheel mousewheel DOMMouseScroll";a("bindEvents",function(){y.bind(p,t,x.handleMouseWheel)}),a("unbindEvents",function(){F&&y.unbind(p,t,x.handleMouseWheel)}),x.mouseZoomedIn=!1;function n(){x.mouseZoomedIn&&(y.removeClass(p,"pswp--zoomed-in"),x.mouseZoomedIn=!1),f<1?y.addClass(p,"pswp--zoom-allowed"):y.removeClass(p,"pswp--zoom-allowed"),o()}var i,o=function(){i&&(y.removeClass(p,"pswp--dragging"),i=!1)};a("resize",n),a("afterChange",n),a("pointerDown",function(){x.mouseZoomedIn&&(i=!0,y.addClass(p,"pswp--dragging"))}),a("pointerUp",o),e||n()},handleMouseWheel:function(e){if(f<=x.currItem.fitRatio)return g.modal&&(!g.closeOnScroll||at||s?e.preventDefault():de&&2<Math.abs(e.deltaY)&&($=!0,x.close())),!0;if(e.stopPropagation(),F.x=0,"deltaX"in e)1===e.deltaMode?(F.x=18*e.deltaX,F.y=18*e.deltaY):(F.x=e.deltaX,F.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(F.x=-.16*e.wheelDeltaX),e.wheelDeltaY?F.y=-.16*e.wheelDeltaY:F.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;F.y=e.detail}nt(f,!0);var t=v.x-F.x,n=v.y-F.y;(g.modal||t<=d.min.x&&t>=d.max.x&&n<=d.min.y&&n>=d.max.y)&&e.preventDefault(),x.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:w.x/2+Ye.x,y:w.y/2+Ye.y};var t=g.getDoubleTapZoom(!0,x.currItem),n=f===t;x.mouseZoomedIn=!n,x.zoomTo(n?x.currItem.initialZoomLevel:t,e,333),y[(n?"remove":"add")+"Class"](p,"pswp--zoomed-in")}}}),{history:!0,galleryUID:1}),Mn=function(){return L.hash.substring(1)},Tn=function(){var e,t;hn&&clearTimeout(hn),at||s?hn=setTimeout(Tn,500):(yn?clearTimeout(fn):yn=!0,t=m+1,(e=Qt(m)).hasOwnProperty("pid")&&(t=e.pid),e=n+"&gid="+g.galleryUID+"&pid="+t,vn||-1===L.hash.indexOf(e)&&(bn=!0),t=L.href.split("#")[0]+"#"+e,In?"#"+e!==window.location.hash&&history[vn?"replaceState":"pushState"]("",document.title,t):vn?L.replace(t):L.hash=e,vn=!0,fn=setTimeout(function(){yn=!1},60))};N("History",{publicMethods:{initHistory:function(){var e,t;y.extend(g,Dn,!0),g.history&&(L=window.location,vn=wn=bn=!1,n=Mn(),In="pushState"in history,-1<n.indexOf("gid=")&&(n=(n=n.split("&gid=")[0]).split("?gid=")[0]),a("afterChange",x.updateURL),a("unbindEvents",function(){y.unbind(window,"hashchange",x.onHashChange)}),e=function(){gn=!0,wn||(bn?history.back():n?L.hash=n:In?history.pushState("",document.title,L.pathname+L.search):L.hash=""),un()},a("unbindEvents",function(){$&&e()}),a("destroy",function(){gn||e()}),a("firstUpdate",function(){m=dn().pid}),-1<(t=n.indexOf("pid="))&&"&"===(n=n.substring(0,t)).slice(-1)&&(n=n.slice(0,-1)),setTimeout(function(){K&&y.bind(window,"hashchange",x.onHashChange)},40))},onHashChange:function(){Mn()===n?(wn=!0,x.close()):yn||(xn=!0,x.goTo(dn().pid),xn=!1)},updateURL:function(){un(),xn||(vn?mn=setTimeout(Tn,800):Tn())}}}),y.extend(x,z)}});
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";return function(o,s){function e(e){if(x)return!0;e=e||window.event,F.timeToIdle&&F.mouseUsed&&!_&&a();for(var t,n,o=(e.target||e.srcElement).getAttribute("class")||"",l=0;l<M.length;l++)(t=M[l]).onTap&&-1<o.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);n&&(e.stopPropagation&&e.stopPropagation(),x=!0,e=s.features.isOldAndroid?600:30,setTimeout(function(){x=!1},e))}function n(){var e=1===F.getNumItemsFn();e!==E&&(y(m,"ui--one-slide",e),E=e)}function i(){y(g,"share-modal--hidden",R)}function l(){if((R=!R)?(s.removeClass(g,"pswp__share-modal--fade-in"),setTimeout(function(){R&&i()},300)):(i(),setTimeout(function(){R||s.addClass(g,"pswp__share-modal--fade-in")},30)),!R){for(var e,t,n,o,l="",r=0;r<F.shareButtons.length;r++){e=F.shareButtons[r];t=F.getImageURLForShare(e);n=F.getPageURLForShare(e);o=F.getTextForShare(e);n=e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(o));l+='<a href="'+n+'" target="_blank" '+'class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>";if(F.parseShareButtonOut)l=F.parseShareButtonOut(e,l)}g.children[0].innerHTML=l,g.children[0].onclick=P}}function r(e){for(var t=0;t<F.closeElClasses.length;t++)if(s.hasClass(e,"pswp__"+F.closeElClasses[t]))return!0}function a(){clearTimeout(k),z=0,_&&K.setIdle(!1)}function u(e){(e=(e=e||window.event).relatedTarget||e.toElement)&&"HTML"!==e.nodeName||(clearTimeout(k),k=setTimeout(function(){K.setIdle(!0)},F.timeToIdleOutside))}function c(e){T!==e&&(y(C,"preloader--active",!e),T=e)}function p(e){var t,n=e.vGap;!o.likelyTouchDevice||F.mouseUsed||screen.width>F.fitControlsWidth?(t=F.barsSize,F.captionEl&&"auto"===t.bottom?(h||((h=s.createEl("pswp__caption pswp__caption--fake")).appendChild(s.createEl("pswp__caption__center")),m.insertBefore(h,f),s.addClass(m,"pswp__ui--fit")),F.addCaptionHTMLFn(e,h,!0)?(e=h.clientHeight,n.bottom=parseInt(e,10)||44):n.bottom=t.top):n.bottom="auto"===t.bottom?0:t.bottom,n.top=t.top):n.top=n.bottom=0}function D(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){l=e[n],r=l.className;for(var o=0;o<M.length;o++)i=M[o],-1<r.indexOf("pswp__"+i.name)&&(F[i.option]?(s.removeClass(l,"pswp__element--disabled"),i.onInit&&i.onInit(l)):s.addClass(l,"pswp__element--disabled"))}}e(m.children);var l,r,i,t=s.getChildByClass(m,"pswp__top-bar");t&&e(t.children)}var d,m,f,h,t,w,g,b,_,v,C,T,I,E,F,x,S,k,K=this,L=!1,O=!0,R=!0,A={barsSize:{top:62,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return o.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return o.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},y=function(e,t,n){s[(n?"add":"remove")+"Class"](e,"pswp__"+t)},P=function(e){var t=(e=e||window.event).target||e.srcElement;if(o.shout("shareLinkClick",e,t),t.href){if(t.hasAttribute("download"))return!0;window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),R||l()}return!1},z=0,M=[{name:"caption",option:"captionEl",onInit:function(e){f=e}},{name:"share-modal",option:"shareEl",onInit:function(e){g=e},onTap:function(){l()}},{name:"button--share",option:"shareEl",onInit:function(e){w=e},onTap:function(){l()}},{name:"button--zoom",option:"zoomEl",onTap:o.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){t=e}},{name:"button--close",option:"closeEl",onTap:o.close},{name:"button--arrow--left",option:"arrowEl",onTap:o.prev},{name:"button--arrow--right",option:"arrowEl",onTap:o.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){d.isFullscreen()?d.exit():d.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){C=e}}];K.init=function(){var t;s.extend(o.options,A,!0),F=o.options,m=s.getChildByClass(o.scrollWrap,"pswp__ui"),(v=o.listen)("onVerticalDrag",function(e){O&&e<.95?K.hideControls():!O&&.95<=e&&K.showControls()}),v("onPinchClose",function(e){O&&e<.9?(K.hideControls(),t=!0):t&&!O&&.9<e&&K.showControls()}),v("zoomGestureEnded",function(){(t=!1)&&!O&&K.showControls()}),v("beforeChange",K.update),v("doubleTap",function(e){var t=o.currItem.initialZoomLevel;o.getZoomLevel()!==t?o.zoomTo(t,e,333):o.zoomTo(F.getDoubleTapZoom(!1,o.currItem),e,333)}),v("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<o.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),v("bindEvents",function(){s.bind(m,"pswpTap click",e),s.bind(o.scrollWrap,"pswpTap",K.onGlobalTap),o.likelyTouchDevice||s.bind(o.scrollWrap,"mouseover",K.onMouseOver)}),v("unbindEvents",function(){R||l(),S&&clearInterval(S),s.unbind(document,"mouseout",u),s.unbind(document,"mousemove",a),s.unbind(m,"pswpTap click",e),s.unbind(o.scrollWrap,"pswpTap",K.onGlobalTap),s.unbind(o.scrollWrap,"mouseover",K.onMouseOver),d&&(s.unbind(document,d.eventK,K.updateFullscreen),d.isFullscreen()&&(F.hideAnimationDuration=0,d.exit()),d=null)}),v("destroy",function(){F.captionEl&&(h&&m.removeChild(h),s.removeClass(f,"pswp__caption--empty")),g&&(g.children[0].onclick=null),s.removeClass(m,"pswp__ui--over-close"),s.addClass(m,"pswp__ui--hidden"),K.setIdle(!1)}),F.showAnimationDuration||s.removeClass(m,"pswp__ui--hidden"),v("initialZoomIn",function(){F.showAnimationDuration&&s.removeClass(m,"pswp__ui--hidden")}),v("initialZoomOut",function(){s.addClass(m,"pswp__ui--hidden")}),v("parseVerticalMargin",p),D(),F.shareEl&&w&&g&&(R=!0),n(),F.timeToIdle&&v("mouseUsed",function(){s.bind(document,"mousemove",a),s.bind(document,"mouseout",u),S=setInterval(function(){2===++z&&K.setIdle(!0)},F.timeToIdle/2)}),F.fullscreenEl&&!s.features.isOldAndroid&&((d=d||K.getFullscreenAPI())?(s.bind(document,d.eventK,K.updateFullscreen),K.updateFullscreen(),s.addClass(o.template,"pswp--supports-fs")):s.removeClass(o.template,"pswp--supports-fs")),F.preloaderEl&&(c(!0),v("beforeChange",function(){clearTimeout(I),I=setTimeout(function(){o.currItem&&o.currItem.loading?o.allowProgressiveImg()&&(!o.currItem.img||o.currItem.img.naturalWidth)||c(!1):c(!0)},F.loadingIndicatorDelay)}),v("imageLoadComplete",function(e,t){o.currItem===t&&c(!0)}))},K.setIdle=function(e){y(m,"ui--idle",_=e)},K.update=function(){L=!(!O||!o.currItem)&&(K.updateIndexIndicator(),F.captionEl&&(F.addCaptionHTMLFn(o.currItem,f),y(f,"caption--empty",!o.currItem.title)),!0),R||l(),n()},K.updateFullscreen=function(e){e&&setTimeout(function(){o.setScrollOffset(0,s.getScrollY())},50),s[(d.isFullscreen()?"add":"remove")+"Class"](o.template,"pswp--fs")},K.updateIndexIndicator=function(){F.counterEl&&(t.innerHTML=o.getCurrentIndex()+1+F.indexIndicatorSep+F.getNumItemsFn())},K.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;x||(e.detail&&"mouse"===e.detail.pointerType?r(t)?o.close():s.hasClass(t,"pswp__img")&&(1===o.getZoomLevel()&&o.getZoomLevel()<=o.currItem.fitRatio?F.clickToCloseNonZoomable&&o.close():o.toggleDesktopZoom(e.detail.releasePoint)):(F.tapToToggleControls&&(O?K.hideControls():K.showControls()),F.tapToClose&&(s.hasClass(t,"pswp__img")||r(t))&&o.close()))},K.onMouseOver=function(e){e=(e=e||window.event).target||e.srcElement;y(m,"ui--over-close",r(e))},K.hideControls=function(){s.addClass(m,"pswp__ui--hidden"),O=!1},K.showControls=function(){O=!0,L||K.update(),s.removeClass(m,"pswp__ui--hidden")},K.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},K.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){if(b=F.closeOnScroll,F.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return o.template[this.enterK]();o.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return F.closeOnScroll=b,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}});
!function(e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=e:e()}(function(){var o=Object.assign||window.jQuery&&jQuery.extend,d=8,a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(function(){e()},25)};function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e);var i,n={textarea:!0,input:!0,select:!0,button:!0},c={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},u={move:"touchmove",cancel:"touchend",end:"touchend"},r=/\s+/,m={bubbles:!0,cancelable:!0},t="function"==typeof Symbol?Symbol("events"):{};function v(e){return e[t]||(e[t]={})}function s(e,t,n,o){t=t.split(r);var i,a=v(e),c=t.length;function u(e){n(e,o)}for(;c--;)(a[i=t[c]]||(a[i]=[])).push([n,u]),e.addEventListener(i,u)}function f(e,t,n){t=t.split(r);var o,i,a,c=v(e),u=t.length;if(c)for(;u--;)if(i=c[o=t[u]])for(a=i.length;a--;)i[a][0]===n&&(e.removeEventListener(o,i[a][1]),i.splice(a,1))}function l(e,t,n){t=new CustomEvent(t,m);n&&o(t,n),e.dispatchEvent(t)}function p(e){var n=e,o=!1,i=!1;function t(e){o?(n(),a(t),o=!(i=!0)):i=!1}this.kick=function(e){o=!0,i||t()},this.end=function(e){var t=n;e&&(i?(n=o?function(){t(),e()}:e,o=!0):e())}}function g(){}function h(e){e.preventDefault()}function X(e,t){var n,o;if(e.identifiedTouch)return e.identifiedTouch(t);for(n=-1,o=e.length;++n<o;)if(e[n].identifier===t)return e[n]}function Y(e,t){e=X(e.changedTouches,t.identifier);if(e&&(e.pageX!==t.pageX||e.pageY!==t.pageY))return e}function y(e,t){E(e,t,e,b)}function w(e,t){b()}function b(){f(document,c.move,y),f(document,c.cancel,w)}function T(e){f(document,u.move,e.touchmove),f(document,u.cancel,e.touchend)}function E(e,t,n,o){var i,a,c,u=n.pageX-t.pageX,r=n.pageY-t.pageY;u*u+r*r<d*d||(t=t,a=n,o=o,e=(i=e).targetTouches,c=i.timeStamp-t.timeStamp,a={altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,startX:t.pageX,startY:t.pageY,distX:u,distY:r,deltaX:u,deltaY:r,pageX:n.pageX,pageY:n.pageY,velocityX:u/c,velocityY:r/c,identifier:t.identifier,targetTouches:e,finger:e?e.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=g,i.preventDefault()}},l(t.target,"movestart",a),o(t))}function S(e,t){var n=t.timer;t.touch=e,t.timeStamp=e.timeStamp,n.kick()}function k(e,t){var n=t.target,o=t.event,t=t.timer;f(document,c.move,S),f(document,c.end,k),j(n,o,t,function(){setTimeout(function(){f(n,"click",h)},0)})}function K(e,t){var n=t.target,o=t.event,i=t.timer;X(e.changedTouches,o.identifier)&&(e=t,f(document,u.move,e.activeTouchmove),f(document,u.end,e.activeTouchend),j(n,o,i))}function j(e,t,n,o){n.end(function(){return l(e,"moveend",t),o&&o()})}function C(e){e.enableMove()}function Q(e){e.enableMove()}function q(e){e.enableMove()}function A(e){var o=e.handler;e.handler=function(e){for(var t,n=i.length;n--;)e[t=i[n]]=e.originalEvent[t];o.apply(this,arguments)}}s(document,"mousedown",function(e){var t;1!==(t=e).which||t.ctrlKey||t.altKey||n[e.target.tagName.toLowerCase()]||(s(document,c.move,y,e),s(document,c.cancel,w,e))}),s(document,"touchstart",function(e){n[e.target.tagName.toLowerCase()]||(e={target:(e=e.changedTouches[0]).target,pageX:e.pageX,pageY:e.pageY,identifier:e.identifier,touchmove:function(e,t){var n;(n=Y(e=e,t=t))&&E(e,t,n,T)},touchend:function(e,t){t=t,X(e.changedTouches,t.identifier)&&T(t)}},s(document,u.move,e.touchmove,e),s(document,u.cancel,e.touchend,e))}),s(document,"movestart",function(e){var t,n;e.defaultPrevented||e.moveEnabled&&(t={startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},n={target:e.target,event:t,timer:new p(function(e){(function(e,t,n){n-=e.timeStamp,e.distX=t.pageX-e.startX,e.distY=t.pageY-e.startY,e.deltaX=t.pageX-e.pageX,e.deltaY=t.pageY-e.pageY,e.velocityX=.3*e.velocityX+.7*e.deltaX/n,e.velocityY=.3*e.velocityY+.7*e.deltaY/n,e.pageX=t.pageX,e.pageY=t.pageY})(t,n.touch,n.timeStamp),l(n.target,"move",t)}),touch:void 0,timeStamp:e.timeStamp},void 0===e.identifier?(s(e.target,"click",h),s(document,c.move,S,n),s(document,c.end,k,n)):(n.activeTouchmove=function(e,t){var n,o,i;e=e,n=(t=t).event,o=t.timer,(i=Y(e,n))&&(e.preventDefault(),n.targetTouches=e.targetTouches,t.touch=i,t.timeStamp=e.timeStamp,o.kick())},n.activeTouchend=function(e,t){K(e,t)},s(document,u.move,n.activeTouchmove,n),s(document,u.end,n.activeTouchend,n)))}),window.jQuery&&(i="startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY".split(" "),jQuery.event.special.movestart={setup:function(){return s(this,"movestart",C),!1},teardown:function(){return f(this,"movestart",C),!1},add:A},jQuery.event.special.move={setup:function(){return s(this,"movestart",Q),!1},teardown:function(){return f(this,"movestart",Q),!1},add:A},jQuery.event.special.moveend={setup:function(){return s(this,"movestart",q),!1},teardown:function(){return f(this,"movestart",q),!1},add:A})});
!function(Y){Y.fn.twentytwenty=function(X){X=Y.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Before",after_label:"After",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1},X);return this.each(function(){function t(t){((t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY)&&"vertical"!==o||(t.distX<t.distY&&t.distX<-t.distY||t.distX>t.distY&&t.distX>-t.distY)&&"vertical"===o)&&t.preventDefault(),i.addClass("active"),u=i.offset().left,_=i.offset().top,m=d.width(),g=d.height()}function e(t){i.hasClass("active")&&(a=p(t.pageX,t.pageY),y(a))}function n(){i.removeClass("active")}var a=X.default_offset_pct,i=Y(this),o=X.orientation,r="vertical"===o?"down":"left",s="vertical"===o?"up":"right",w='<svg width="16" height="26" viewBox="0 0 16 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 2L13 13L2 24" stroke-width="3" stroke-miterlimit="10"/></svg>',d=(i.wrap("<div class='twentytwenty-wrapper twentytwenty-"+o+"'></div>"),X.no_overlay||(i.append("<div class='twentytwenty-overlay'></div>"),(b=i.find(".twentytwenty-overlay")).append("<div class='twentytwenty-arrow twentytwenty-before-label' data-content='"+X.before_label+"'>"+w+"</div>"),b.append("<div class='twentytwenty-arrow twentytwenty-after-label' data-content='"+X.after_label+"'>"+w+"</div>")),i.find("img:first")),c=i.find("img:last"),l=(i.append("<div class='twentytwenty-handle ba-handle'></div>"),i.find(".twentytwenty-handle")),f=(l.append("<span class='twentytwenty-arrow twentytwenty-"+r+"-arrow ba-arrow' data-ba-arrow-direction='"+r+"'>"+w+"</span>"),l.append("<div class='ba-bar'></div>"),l.append("<span class='twentytwenty-arrow twentytwenty-"+s+"-arrow ba-arrow' data-ba-arrow-direction='"+s+"'>"+w+"</span>"),i.addClass("twentytwenty-container"),d.addClass("twentytwenty-before"),c.addClass("twentytwenty-after"),function(t){var e=d.width(),n=d.height();return{w:e+"px",h:n+"px",cw:t*e+"px",ch:t*n+"px"}}),v=function(t){"vertical"===o?(d.css("clip","rect(0,"+t.w+","+t.ch+",0)"),c.css("clip","rect("+t.ch+","+t.w+","+t.h+",0)")):(d.css("clip","rect(0,"+t.cw+","+t.h+",0)"),c.css("clip","rect(0,"+t.w+","+t.h+","+t.cw+")")),i.css("height",t.h)},y=function(t){t=f(t);l.css("vertical"===o?"top":"left","vertical"===o?t.ch:t.cw),v(t)},h=function(t,e,n){return Math.max(e,Math.min(n,t))},p=function(t,e){return h("vertical"===o?(e-_)/g:(t-u)/m,0,1)},u=(Y(window).on("resize.twentytwenty",function(t){y(a)}),0),_=0,m=0,g=0,b=X.move_with_handle_only?l:i;b.on("movestart",t),b.on("move",e),b.on("moveend",n),X.move_slider_on_hover&&(i.on("mouseenter",t),i.on("mousemove",e),i.on("mouseleave",n)),l.on("touchmove",function(t){t.preventDefault()}),i.find("img").on("mousedown",function(t){t.preventDefault()}),X.click_to_move&&i.on("click",function(t){u=i.offset().left,_=i.offset().top,m=d.width(),g=d.height(),a=p(t.pageX,t.pageY),y(a)}),Y(window).trigger("resize.twentytwenty")})}}(jQuery);
this.PIXI=this.PIXI||{};var _pixi_constants=function(E){"use strict";return E.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19,NONE:20,SRC_OVER:0,SRC_IN:21,SRC_OUT:22,SRC_ATOP:23,DST_OVER:24,DST_IN:25,DST_OUT:26,DST_ATOP:27,ERASE:26,SUBTRACT:28},E.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},E.ENV={WEBGL_LEGACY:0,WEBGL:1,WEBGL2:2},E.FORMATS={RGBA:6408,RGB:6407,ALPHA:6406,LUMINANCE:6409,LUMINANCE_ALPHA:6410,DEPTH_COMPONENT:6402,DEPTH_STENCIL:34041},E.GC_MODES={AUTO:0,MANUAL:1},E.MIPMAP_MODES={OFF:0,POW2:1,ON:2},E.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},E.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},E.SCALE_MODES={LINEAR:1,NEAREST:0},E.TARGETS={TEXTURE_2D:3553,TEXTURE_CUBE_MAP:34067,TEXTURE_2D_ARRAY:35866,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074},E.TYPES={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,FLOAT:5126,HALF_FLOAT:36193},E.WRAP_MODES={CLAMP:33071,REPEAT:10497,MIRRORED_REPEAT:33648},E}({});Object.assign(this.PIXI,_pixi_constants);
this.PIXI=this.PIXI||{};var _pixi_math=function(t){"use strict";function n(t,i){void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=i}function s(t,i,s,h){void 0===h&&(h=0),this._x=s=void 0===s?0:s,this._y=h,this.cb=t,this.scope=i}n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},n.prototype.copyTo=function(t){return t.set(this.x,this.y),t},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,i){this.x=t||0,this.y=i||(0!==i?this.x:0)};function i(t,i,s,h,o,n){void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=1),void 0===o&&(o=0),void 0===n&&(n=0),this.a=t=void 0===t?1:t,this.b=i,this.c=s,this.d=h,this.tx=o,this.ty=n,this.array=null}var h={x:{configurable:!0},y:{configurable:!0}},a=(s.prototype.clone=function(t,i){t=(t=void 0===t?null:t)||this.cb,i=(i=void 0===i?null:i)||this.scope;return new s(t,i,this._x,this._y)},s.prototype.set=function(t,i){t=t||0,i=i||(0!==i?t:0);this._x===t&&this._y===i||(this._x=t,this._y=i,this.cb.call(this.scope))},s.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},s.prototype.copyTo=function(t){return t.set(this._x,this._y),t},s.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},h.x.get=function(){return this._x},h.x.set=function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},h.y.get=function(){return this._y},h.y.set=function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},Object.defineProperties(s.prototype,h),2*Math.PI),h=180/Math.PI,o=Math.PI/180,r={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e={IDENTITY:{configurable:!0},TEMP_MATRIX:{configurable:!0}},c=(i.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},i.prototype.set=function(t,i,s,h,o,n){return this.a=t,this.b=i,this.c=s,this.d=h,this.tx=o,this.ty=n,this},i.prototype.toArray=function(t,i){this.array||(this.array=new Float32Array(9));i=i||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0),i[8]=1,i},i.prototype.apply=function(t,i){i=i||new n;var s=t.x,t=t.y;return i.x=this.a*s+this.c*t+this.tx,i.y=this.b*s+this.d*t+this.ty,i},i.prototype.applyInverse=function(t,i){i=i||new n;var s=1/(this.a*this.d+this.c*-this.b),h=t.x,t=t.y;return i.x=this.d*s*h+-this.c*s*t+(this.ty*this.c-this.tx*this.d)*s,i.y=this.a*s*t+-this.b*s*h+(-this.ty*this.a+this.tx*this.b)*s,i},i.prototype.translate=function(t,i){return this.tx+=t,this.ty+=i,this},i.prototype.scale=function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this},i.prototype.rotate=function(t){var i=Math.cos(t),t=Math.sin(t),s=this.a,h=this.c,o=this.tx;return this.a=s*i-this.b*t,this.b=s*t+this.b*i,this.c=h*i-this.d*t,this.d=h*t+this.d*i,this.tx=o*i-this.ty*t,this.ty=o*t+this.ty*i,this},i.prototype.append=function(t){var i=this.a,s=this.b,h=this.c,o=this.d;return this.a=t.a*i+t.b*h,this.b=t.a*s+t.b*o,this.c=t.c*i+t.d*h,this.d=t.c*s+t.d*o,this.tx=t.tx*i+t.ty*h+this.tx,this.ty=t.tx*s+t.ty*o+this.ty,this},i.prototype.setTransform=function(t,i,s,h,o,n,r,e,a){return this.a=Math.cos(r+a)*o,this.b=Math.sin(r+a)*o,this.c=-Math.sin(r-e)*n,this.d=Math.cos(r-e)*n,this.tx=t-(s*this.a+h*this.c),this.ty=i-(s*this.b+h*this.d),this},i.prototype.prepend=function(t){var i,s,h=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(i=this.a,s=this.c,this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d),this.tx=h*t.a+this.ty*t.c+t.tx,this.ty=h*t.b+this.ty*t.d+t.ty,this},i.prototype.decompose=function(t){var i=this.a,s=this.b,h=this.c,o=this.d,n=-Math.atan2(-h,o),r=Math.atan2(s,i),e=Math.abs(n+r);return e<1e-5||Math.abs(a-e)<1e-5?(t.rotation=r,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=n,t.skew.y=r),t.scale.x=Math.sqrt(i*i+s*s),t.scale.y=Math.sqrt(h*h+o*o),t.position.x=this.tx,t.position.y=this.ty,t},i.prototype.invert=function(){var t=this.a,i=this.b,s=this.c,h=this.d,o=this.tx,n=t*h-i*s;return this.a=h/n,this.b=-i/n,this.c=-s/n,this.d=t/n,this.tx=(s*this.ty-h*o)/n,this.ty=-(t*this.ty-i*o)/n,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var t=new i;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},e.IDENTITY.get=function(){return new i},e.TEMP_MATRIX.get=function(){return new i},Object.defineProperties(i,e),[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1]),y=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],u=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],p=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],d=[],x=[],f=Math.sign;for(var l=0;l<16;l++){var _=[];d.push(_);for(var b=0;b<16;b++)for(var v=f(c[l]*c[b]+u[l]*y[b]),w=f(y[l]*c[b]+p[l]*y[b]),g=f(c[l]*u[b]+u[l]*p[b]),I=f(y[l]*u[b]+p[l]*p[b]),M=0;M<16;M++)if(c[M]===v&&y[M]===w&&u[M]===g&&p[M]===I){_.push(M);break}}for(var m=0;m<16;m++){var D=new i;D.set(c[m],y[m],u[m],p[m],0,0),x.push(D)}function T(){this.worldTransform=new i,this.localTransform=new i,this.position=new s(this.onChange,this,0,0),this.scale=new s(this.onChange,this,1,1),this.pivot=new s(this.onChange,this,0,0),this.skew=new s(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}function E(t,i,s,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=0),this.x=Number(t),this.y=Number(i),this.width=Number(s),this.height=Number(h),this.type=r.RECT}function R(t,i,s){void 0===i&&(i=0),void 0===s&&(s=0),this.x=t=void 0===t?0:t,this.y=i,this.radius=s,this.type=r.CIRC}function P(t,i,s,h){void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=0),this.x=t=void 0===t?0:t,this.y=i,this.width=s,this.height=h,this.type=r.ELIP}function A(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];if((t=Array.isArray(t[0])?t[0]:t)[0]instanceof n){for(var s=[],h=0,o=t.length;h<o;h++)s.push(t[h].x,t[h].y);t=s}this.points=t,this.type=r.POLY,this.closeStroke=!0}function N(t,i,s,h,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=0),void 0===o&&(o=20),this.x=t=void 0===t?0:t,this.y=i,this.width=s,this.height=h,this.radius=o,this.type=r.RREC}var O={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return c[t]},uY:function(t){return y[t]},vX:function(t){return u[t]},vY:function(t){return p[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,i){return d[t][i]},sub:function(t,i){return d[t][O.inv(i)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,i){return 2*Math.abs(t)<=Math.abs(i)?0<=i?O.S:O.N:2*Math.abs(i)<=Math.abs(t)?0<t?O.E:O.W:0<i?0<t?O.SE:O.SW:0<t?O.NE:O.NW},matrixAppendRotationInv:function(t,i,s,h){void 0===s&&(s=0),void 0===h&&(h=0);i=x[O.inv(i)];i.tx=s,i.ty=h,t.append(i)}},e={rotation:{configurable:!0}},e=(T.prototype.onChange=function(){this._localID++},T.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},T.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},T.prototype.updateTransform=function(t){var i,s,h=this.localTransform;this._localID!==this._currentLocalID&&(h.a=this._cx*this.scale._x,h.b=this._sx*this.scale._x,h.c=this._cy*this.scale._y,h.d=this._sy*this.scale._y,h.tx=this.position._x-(this.pivot._x*h.a+this.pivot._y*h.c),h.ty=this.position._y-(this.pivot._x*h.b+this.pivot._y*h.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(i=t.worldTransform,(s=this.worldTransform).a=h.a*i.a+h.b*i.c,s.b=h.a*i.b+h.b*i.d,s.c=h.c*i.a+h.d*i.c,s.d=h.c*i.b+h.d*i.d,s.tx=h.tx*i.a+h.ty*i.c+i.tx,s.ty=h.tx*i.b+h.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++)},T.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},e.rotation.get=function(){return this._rotation},e.rotation.set=function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},Object.defineProperties(T.prototype,e),T.IDENTITY=new T,{left:{configurable:!0},right:{configurable:!0},top:{configurable:!0},bottom:{configurable:!0}}),k={EMPTY:{configurable:!0}};e.left.get=function(){return this.x},e.right.get=function(){return this.x+this.width},e.top.get=function(){return this.y},e.bottom.get=function(){return this.y+this.height},k.EMPTY.get=function(){return new E(0,0,0,0)},E.prototype.clone=function(){return new E(this.x,this.y,this.width,this.height)},E.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},E.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},E.prototype.contains=function(t,i){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height)},E.prototype.pad=function(t,i){t=t||0,i=i||(0!==i?t:0),this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i},E.prototype.fit=function(t){var i=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),h=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);this.x=i,this.width=Math.max(s-i,0),this.y=h,this.height=Math.max(t-h,0)},E.prototype.ceil=function(t,i){void 0===t&&(t=1),void 0===i&&(i=.001);var s=Math.ceil((this.x+this.width-i)*t)/t,h=Math.ceil((this.y+this.height-i)*t)/t;this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=s-this.x,this.height=h-this.y},E.prototype.enlarge=function(t){var i=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),h=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);this.x=i,this.width=s-i,this.y=h,this.height=t-h},Object.defineProperties(E.prototype,e),Object.defineProperties(E,k),R.prototype.clone=function(){return new R(this.x,this.y,this.radius)},R.prototype.contains=function(t,i){var s;return!(this.radius<=0)&&(s=this.radius*this.radius,t=this.x-t,i=this.y-i,(t*=t)+(i*=i)<=s)},R.prototype.getBounds=function(){return new E(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},P.prototype.clone=function(){return new P(this.x,this.y,this.width,this.height)},P.prototype.contains=function(t,i){return!(this.width<=0||this.height<=0)&&(t=(t-this.x)/this.width,i=(i-this.y)/this.height,(t*=t)+(i*=i)<=1)},P.prototype.getBounds=function(){return new E(this.x-this.width,this.y-this.height,this.width,this.height)},A.prototype.clone=function(){var t=new A(this.points.slice());return t.closeStroke=this.closeStroke,t},A.prototype.contains=function(t,i){for(var s=!1,h=this.points.length/2,o=0,n=h-1;o<h;n=o++){var r=this.points[2*o],e=this.points[2*o+1],a=this.points[2*n],c=this.points[2*n+1];i<e!=i<c&&t<(i-e)/(c-e)*(a-r)+r&&(s=!s)}return s};return N.prototype.clone=function(){return new N(this.x,this.y,this.width,this.height,this.radius)},N.prototype.contains=function(t,i){if(!(this.width<=0||this.height<=0)&&t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){if(i>=this.y+this.radius&&i<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var s=t-(this.x+this.radius),h=i-(this.y+this.radius),o=this.radius*this.radius;if(s*s+h*h<=o)return!0;if((s=t-(this.x+this.width-this.radius))*s+h*h<=o)return!0;if(s*s+(h=i-(this.y+this.height-this.radius))*h<=o)return!0;if((s=t-(this.x+this.radius))*s+h*h<=o)return!0}return!1},t.Circle=R,t.DEG_TO_RAD=o,t.Ellipse=P,t.GroupD8=O,t.Matrix=i,t.ObservablePoint=s,t.PI_2=a,t.Point=n,t.Polygon=A,t.RAD_TO_DEG=h,t.Rectangle=E,t.RoundedRectangle=N,t.SHAPES=r,t.Transform=T,t}({});Object.assign(this.PIXI,_pixi_math);
this.PIXI=this.PIXI||{};var _pixi_runner=function(t){"use strict";function e(t){this.items=[],this._name=t,this._aliasCount=0}var i={empty:{configurable:!0},name:{configurable:!0}};return e.prototype.emit=function(t,e,i,s,n,r,o,h){if(8<arguments.length)throw new Error("max arguments reached");var u=this.name,m=this.items;this._aliasCount++;for(var a=0,p=m.length;a<p;a++)m[a][u](t,e,i,s,n,r,o,h);return m===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},e.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(t){return-1!==this.items.indexOf(t)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},i.empty.get=function(){return 0===this.items.length},i.name.get=function(){return this._name},Object.defineProperties(e.prototype,i),e.prototype.dispatch=e.prototype.emit,e.prototype.run=e.prototype.emit,t.Runner=e,t}({});Object.assign(this.PIXI,_pixi_runner);
this.PIXI=this.PIXI||{};var _pixi_settings=function(e){"use strict";var v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(e){function o(e,i){return e.test(i)}function i(e){var e=e||("undefined"!=typeof navigator?navigator.userAgent:""),i=e.split("[FBAN"),i=(void 0!==(i=(e=void 0!==i[1]?i[0]:e).split("Twitter"))[1]&&(e=i[0]),{apple:{phone:o(t,e)&&!o(b,e),ipod:o(d,e),tablet:!o(t,e)&&o(r,e)&&!o(b,e),device:(o(t,e)||o(d,e)||o(r,e))&&!o(b,e)},amazon:{phone:o(s,e),tablet:!o(s,e)&&o(l,e),device:o(s,e)||o(l,e)},android:{phone:!o(b,e)&&o(s,e)||!o(b,e)&&o(a,e),tablet:!o(b,e)&&!o(s,e)&&!o(a,e)&&(o(l,e)||o(p,e)),device:!o(b,e)&&(o(s,e)||o(l,e)||o(a,e)||o(p,e))||o(/\bokhttp\b/i,e)},windows:{phone:o(b,e),tablet:o(E,e),device:o(b,e)||o(E,e)},other:{blackberry:o(h,e),blackberry10:o(c,e),opera:o(_,e),firefox:o(f,e),chrome:o(A,e),device:o(h,e)||o(c,e)||o(_,e)||o(f,e)||o(A,e)}});return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}var n,t,d,r,a,p,s,l,b,E,h,c,_,A,f;n=v,t=/iPhone/i,d=/iPod/i,r=/iPad/i,a=/\bAndroid(?:.+)Mobile\b/i,p=/Android/i,s=/\bAndroid(?:.+)SD4930UR\b/i,l=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,b=/Windows Phone/i,E=/\bWindows(?:.+)ARM\b/i,h=/BlackBerry/i,c=/BB10/i,_=/Opera Mini/i,A=/\b(CriOS|Chrome)(?:.+)Mobile/i,f=/Mobile(?:.+)Firefox\b/i,e.exports&&"undefined"==typeof window?e.exports=i:e.exports&&"undefined"!=typeof window?(e.exports=i(),e.exports.isMobile=i):n.isMobile=i()})(i={exports:{}});var i=i.exports;i.isMobile;var o,n,t={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(o=32,n=!0,(i.tablet||i.phone)&&(n=!1,i.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&11<=parseInt(t[1],10)&&(n=!0),i.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&7<=parseInt(t[1],10)&&(n=!0)),n?o:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:i.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!i.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};return e.isMobile=i,e.settings=t,e}({});Object.assign(this.PIXI,_pixi_settings);
this.PIXI=this.PIXI||{};var _pixi_ticker=function(t,n){"use strict";n.settings.TARGET_FPMS=.06;function s(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=0),void 0===s&&(s=!1),this.fn=t,this.context=e,this.priority=i,this.once=s,this.next=null,this.previous=null,this._destroyed=!1}function i(){var e=this;this._head=new s(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/n.settings.TARGET_FPMS,this.elapsedMS=1/n.settings.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}function e(){}var r={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50},h=(s.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},s.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},s.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},s.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},{FPS:{configurable:!0},minFPS:{configurable:!0},maxFPS:{configurable:!0}}),a={shared:{configurable:!0},system:{configurable:!0}};i.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(t,e,i){return this._addListener(new s(t,e,i=void 0===i?r.NORMAL:i))},i.prototype.addOnce=function(t,e,i){return this._addListener(new s(t,e,i=void 0===i?r.NORMAL:i,!0))},i.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}e=(i=e).next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},i.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(t){var e;if((t=void 0===t?performance.now():t)>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*n.settings.TARGET_FPMS;for(var i=this._head,s=i.next;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},h.FPS.get=function(){return 1e3/this.elapsedMS},h.minFPS.get=function(){return 1e3/this._maxElapsedMS},h.minFPS.set=function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,n.settings.TARGET_FPMS);this._maxElapsedMS=1/t},h.maxFPS.get=function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},h.maxFPS.set=function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},a.shared.get=function(){var t;return i._shared||((t=i._shared=new i).autoStart=!0,t._protected=!0),i._shared},a.system.get=function(){var t;return i._system||((t=i._system=new i).autoStart=!0,t._protected=!0),i._system},Object.defineProperties(i.prototype,h),Object.defineProperties(i,a);return e.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,r.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?i.shared:new i,t.autoStart&&this.start()},e.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())},t.Ticker=i,t.TickerPlugin=e,t.UPDATE_PRIORITY=r,t}({},PIXI);Object.assign(this.PIXI,_pixi_ticker);
this.PIXI=this.PIXI||{},this.PIXI.utils=this.PIXI.utils||{};var _pixi_utils=function(t,s,o){"use strict";var j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var b=e(function(t){var r=Object.prototype.hasOwnProperty,x="~";function n(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");n=new s(n,r||t,o),r=x?x+e:e;return t._events[r]?t._events[r].fn?t._events[r]=[t._events[r],n]:t._events[r].push(n):(t._events[r]=n,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function e(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(x=!1)),e.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(x?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},e.prototype.listeners=function(t){var t=x?x+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,r=e.length,o=new Array(r);n<r;n++)o[n]=e[n].fn;return o},e.prototype.listenerCount=function(t){t=x?x+t:t,t=this._events[t];return t?t.fn?1:t.length:0},e.prototype.emit=function(t,e,n,r,o,s){var i=arguments,a=x?x+t:t;if(!this._events[a])return!1;var h,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,o),!0;case 6:return u.fn.call(u.context,e,n,r,o,s),!0}for(p=1,h=new Array(c-1);p<c;p++)h[p-1]=i[p];u.fn.apply(u.context,h)}else for(var l,f=u.length,p=0;p<f;p++)switch(u[p].once&&this.removeListener(t,u[p].fn,void 0,!0),c){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,e);break;case 3:u[p].fn.call(u[p].context,e,n);break;case 4:u[p].fn.call(u[p].context,e,n,r);break;default:if(!h)for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=i[l];u[p].fn.apply(u[p].context,h)}return!0},e.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},e.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},e.prototype.removeListener=function(t,e,n,r){t=x?x+t:t;if(this._events[t])if(e){var o=this._events[t];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||h(this,t);else{for(var s=0,i=[],a=o.length;s<a;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&i.push(o[s]);i.length?this._events[t]=1===i.length?i[0]:i:h(this,t)}}else h(this,t);return this},e.prototype.removeAllListeners=function(t){return t?(t=x?x+t:t,this._events[t]&&h(this,t)):(this._events=new n,this._eventsCount=0),this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prefixed=x,t.exports=e.EventEmitter=e}),n=i,r=i;function i(t,e,n){n=n||2;var r,o,s,i,a,h=e&&e.length,u=h?e[0]*n:t.length,c=k(t,0,u,n,!0),l=[];if(c&&c.next!==c.prev){if(h&&(c=function(t,e,n,r){var o,s,i,a,h=[];for(o=0,s=e.length;o<s;o++)a=e[o]*r,i=o<s-1?e[o+1]*r:t.length,(a=k(t,a,i,r,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,n=t;for(;(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next,e!==t;);return n}(a));for(h.sort(T),o=0;o<h.length;o++)!function(t,e){(e=function(t,e){var n,r=e,o=t.x,s=t.y,i=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=o&&i<a){if((i=a)===o){if(s===r.y)return r;if(s===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}}while(r=r.next,r!==e);if(!n)return null;if(o!==i){var h,u=n,c=n.x,l=n.y,f=1/0;for(r=n;o>=r.x&&r.x>=c&&o!==r.x&&D(s<l?o:i,s,c,l,s<l?i:o,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(o-r.x),L(r,t)&&(h<f||h===f&&(r.x>n.x||r.x===n.x&&function(t,e){return M(t.prev,t,e.prev)<0&&M(e.next,t,t.next)<0}(n,r)))&&(n=r,f=h)),(r=r.next)!==u;);}return n}(t,e))&&E(e=U(e,t),e.next)}(h[o],n),n=E(n,n.next);return n}(t,e,c,n)),t.length>80*n){for(var f=r=t[0],p=o=t[1],x=n;x<u;x+=n)(s=t[x])<f&&(f=s),(i=t[x+1])<p&&(p=i),r<s&&(r=s),o<i&&(o=i);a=0!==(a=Math.max(r-f,o-p))?1/a:0}A(c,l,n,f,p,a)}return l}function k(t,e,n,r,o){var s,i;if(o===0<v(t,e,n,r))for(s=e;s<n;s+=r)i=F(s,t[s],t[s+1],i);else for(s=n-r;e<=s;s-=r)i=F(s,t[s],t[s+1],i);return i&&R(i,i.next)&&(P(i),i=i.next),i}function E(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!R(r,r.next)&&0!==M(r.prev,r,r.next))r=r.next;else{if(P(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function A(t,e,n,r,o,s,i){if(t){if(!i&&s){for(var a=t,h=r,u=o,c=s,l=a;null===l.z&&(l.z=I(l.x,l.y,h,u,c)),l.prevZ=l.prev,l.nextZ=l.next,(l=l.next)!==a;);l.prevZ.nextZ=null,l.prevZ=null;var f,p,x,v,d,y,g,m,b=l,w=1;do{for(p=b,d=b=null,y=0;p;){for(y++,x=p,f=g=0;f<w&&(g++,x=x.nextZ);f++);for(m=w;0<g||0<m&&x;)0!==g&&(0===m||!x||p.z<=x.z)?(p=(v=p).nextZ,g--):(x=(v=x).nextZ,m--),d?d.nextZ=v:b=v,v.prevZ=d,d=v;p=x}}while(d.nextZ=null,w*=2,1<y)}for(var O,_,C=t;t.prev!==t.next;)if(O=t.prev,_=t.next,s?function(t,e,n,r){var o=t.prev,s=t,i=t.next;if(0<=M(o,s,i))return;var a=(o.x<s.x?o.x<i.x?o:i:s.x<i.x?s:i).x,h=(o.y<s.y?o.y<i.y?o:i:s.y<i.y?s:i).y,u=(o.x>s.x?o.x>i.x?o:i:s.x>i.x?s:i).x,c=(o.y>s.y?o.y>i.y?o:i:s.y>i.y?s:i).y,l=I(a,h,e,n,r),f=I(u,c,e,n,r),p=t.prevZ,x=t.nextZ;for(;p&&p.z>=l&&x&&x.z<=f;){if(p!==t.prev&&p!==t.next&&D(o.x,o.y,s.x,s.y,i.x,i.y,p.x,p.y)&&0<=M(p.prev,p,p.next))return;if(p=p.prevZ,x!==t.prev&&x!==t.next&&D(o.x,o.y,s.x,s.y,i.x,i.y,x.x,x.y)&&0<=M(x.prev,x,x.next))return;x=x.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&D(o.x,o.y,s.x,s.y,i.x,i.y,p.x,p.y)&&0<=M(p.prev,p,p.next))return;p=p.prevZ}for(;x&&x.z<=f;){if(x!==t.prev&&x!==t.next&&D(o.x,o.y,s.x,s.y,i.x,i.y,x.x,x.y)&&0<=M(x.prev,x,x.next))return;x=x.nextZ}return 1}(t,r,o,s):function(t){var e=t.prev,n=t,r=t.next;if(0<=M(e,n,r))return;var o=t.next.next;for(;o!==t.prev;){if(D(e.x,e.y,n.x,n.y,r.x,r.y,o.x,o.y)&&0<=M(o.prev,o,o.next))return;o=o.next}return 1}(t))e.push(O.i/n),e.push(t.i/n),e.push(_.i/n),P(t),t=_.next,C=_.next;else if((t=_)===C){i?1===i?A(t=function(t,e,n){var r=t;do{var o=r.prev,s=r.next.next}while(!R(o,s)&&q(o,r,r.next,s)&&L(o,s)&&L(s,o)&&(e.push(o.i/n),e.push(r.i/n),e.push(s.i/n),P(r),P(r.next),r=t=s),r=r.next,r!==t);return E(r)}(E(t),e,n),e,n,r,o,s,2):2===i&&function(t,e,n,r,o,s){var i=t;do{for(var a,h=i.next.next;h!==i.prev;){if(i.i!==h.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&q(n,n.next,t,e))return 1}while(n=n.next,n!==t);return}(t,e)&&(L(t,e)&&L(e,t)&&function(t,e){var n=t,r=!1,o=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;n.y>s!=n.next.y>s&&n.next.y!==n.y&&o<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next,n!==t;);return r}(t,e)&&(M(t.prev,t,e.prev)||M(t,e.prev,e))||R(t,e)&&0<M(t.prev,t,t.next)&&0<M(e.prev,e,e.next))}(i,h))return a=U(i,h),i=E(i,i.next),a=E(a,a.next),A(i,e,n,r,o,s),A(a,e,n,r,o,s);h=h.next}}while(i=i.next,i!==t)}(t,e,n,r,o,s):A(E(t),e,n,r,o,s,1);break}}}function T(t,e){return t.x-e.x}function I(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function D(t,e,n,r,o,s,i,a){return 0<=(o-i)*(e-a)-(t-i)*(s-a)&&0<=(t-i)*(r-a)-(n-i)*(e-a)&&0<=(n-i)*(s-a)-(o-i)*(r-a)}function M(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function R(t,e){return t.x===e.x&&t.y===e.y}function q(t,e,n,r){var o=u(M(t,e,n)),s=u(M(t,e,r)),i=u(M(n,r,t)),a=u(M(n,r,e));return o!==s&&i!==a||(0===o&&h(t,n,e)||(0===s&&h(t,r,e)||(0===i&&h(n,t,r)||!(0!==a||!h(n,e,r)))))}function h(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function u(t){return 0<t?1:t<0?-1:0}function L(t,e){return M(t.prev,t,t.next)<0?0<=M(t,e,t.next)&&0<=M(t,t.prev,e):M(t,e,t.prev)<0||M(t,t.next,e)<0}function U(t,e){var n=new a(t.i,t.x,t.y),r=new a(e.i,e.x,e.y),o=t.next,s=e.prev;return(t.next=e).prev=t,(n.next=o).prev=n,(r.next=n).prev=r,(s.next=r).prev=s,r}function F(t,e,n,r){t=new a(t,e,n);return r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function P(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function a(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function v(t,e,n,r){for(var o=0,s=e,i=n-r;s<n;s+=r)o+=(t[i]-t[s])*(t[s+1]+t[i+1]),i=s;return o}i.deviation=function(t,e,n,r){var o=e&&e.length,s=o?e[0]*n:t.length,i=Math.abs(v(t,0,s,n));if(o)for(var a=0,h=e.length;a<h;a++){var u=e[a]*n,c=a<h-1?e[a+1]*n:t.length;i-=Math.abs(v(t,u,c,n))}for(var l=0,a=0;a<r.length;a+=3){var f=r[a]*n,p=r[a+1]*n,x=r[a+2]*n;l+=Math.abs((t[f]-t[x])*(t[1+p]-t[1+f])-(t[f]-t[p])*(t[1+x]-t[1+f]))}return 0===i&&0===l?0:Math.abs((l-i)/i)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,o=0;o<t.length;o++){for(var s=0;s<t[o].length;s++)for(var i=0;i<e;i++)n.vertices.push(t[o][s][i]);0<o&&(r+=t[o-1].length,n.holes.push(r))}return n},n.default=r;var B=e(function(t,e){var n=j,r=e&&!e.nodeType&&e,e=t&&!t.nodeType&&t,o="object"==typeof j&&j;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var s,i,d=2147483647,y=36,g=26,a=38,h=700,u=/^xn--/,c=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=y-1,m=Math.floor,b=String.fromCharCode;function w(t){throw RangeError(f[t])}function x(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function v(t,e){var n=t.split("@"),r="",n=(1<n.length&&(r=n[0]+"@",t=n[1]),(t=t.replace(l,".")).split("."));return r+x(n,e).join(".")}function O(t){for(var e,n,r=[],o=0,s=t.length;o<s;)55296<=(e=t.charCodeAt(o++))&&e<=56319&&o<s?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function _(t){return x(t,function(t){var e="";return 65535<t&&(e+=b((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=b(t)}).join("")}function C(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,n){var r=0;for(t=n?m(t/h):t>>1,t+=m(t/e);p*g>>1<t;r+=y)t=m(t/p);return m(r+(p+1)*t/(t+a))}function A(t){var e,n,r,o,s,i,a,h=[],u=t.length,c=0,l=128,f=72,p=t.lastIndexOf("-");for(p<0&&(p=0),n=0;n<p;++n)128<=t.charCodeAt(n)&&w("not-basic"),h.push(t.charCodeAt(n));for(r=0<p?p+1:0;r<u;){for(o=c,s=1,i=y;u<=r&&w("invalid-input"),a=t.charCodeAt(r++),(y<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:y)||a>m((d-c)/s))&&w("overflow"),c+=a*s,!(a<(a=i<=f?1:f+g<=i?g:i-f));i+=y)s>m(d/(a=y-a))&&w("overflow"),s*=a;f=E(c-o,e=h.length+1,0==o),m(c/e)>d-l&&w("overflow"),l+=m(c/e),c%=e,h.splice(c++,0,l)}return _(h)}function I(t){for(var e,n,r,o,s,i,a,h,u,c,l=[],f=(t=O(t)).length,p=128,x=72,v=e=0;v<f;++v)(a=t[v])<128&&l.push(b(a));for(n=r=l.length,r&&l.push("-");n<f;){for(o=d,v=0;v<f;++v)p<=(a=t[v])&&a<o&&(o=a);for(o-p>m((d-e)/(h=n+1))&&w("overflow"),e+=(o-p)*h,p=o,v=0;v<f;++v)if((a=t[v])<p&&++e>d&&w("overflow"),a==p){for(s=e,i=y;!(s<(u=i<=x?1:x+g<=i?g:i-x));i+=y)l.push(b(C(u+(c=s-u)%(u=y-u),0))),s=m(c/u);l.push(b(C(s,0))),x=E(e,h,n==r),e=0,++n}++e,++p}return l.join("")}if(s={version:"1.3.2",ucs2:{decode:O,encode:_},decode:A,encode:I,toASCII:function(t){return v(t,function(t){return c.test(t)?"xn--"+I(t):t})},toUnicode:function(t){return v(t,function(t){return u.test(t)?A(t.slice(4).toLowerCase()):t})}},r&&e)if(t.exports==r)e.exports=s;else for(i in s)s.hasOwnProperty(i)&&(r[i]=s[i]);else n.punycode=s}),_=function(t){return"string"==typeof t},z=function(t){return"object"==typeof t&&null!==t},w=function(t){return null===t},X=function(t){return null==t};function J(t,e,n,r){e=e||"&",n=n||"=";var o={};if("string"==typeof t&&0!==t.length){var s=/\+/g,e=(t=t.split(e),1e3),i=(r&&"number"==typeof r.maxKeys&&(e=r.maxKeys),t.length);0<e&&e<i&&(i=e);for(var a=0;a<i;++a){var h,u=t[a].replace(s,"%20"),c=u.indexOf(n),c=0<=c?(h=u.substr(0,c),u.substr(c+1)):(h=u,""),u=decodeURIComponent(h),c=decodeURIComponent(c);Object.prototype.hasOwnProperty.call(o,u)?Array.isArray(o[u])?o[u].push(c):o[u]=[o[u],c]:o[u]=c}}return o}function c(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function W(n,r,o,t){return r=r||"&",o=o||"=","object"==typeof(n=null===n?void 0:n)?Object.keys(n).map(function(t){var e=encodeURIComponent(c(t))+o;return Array.isArray(n[t])?n[t].map(function(t){return e+encodeURIComponent(c(t))}).join(r):e+encodeURIComponent(c(n[t]))}).join(r):t?encodeURIComponent(c(t))+o+encodeURIComponent(c(n)):""}function H(t,e){return f(t,!1,!0).resolve(e)}function $(t,e){return t?f(t,!1,!0).resolveObject(e):e}function G(t){return(t=_(t)?f(t):t)instanceof O?t.format():O.prototype.format.call(t)}var C=e(function(t,e){e.decode=e.parse=J,e.encode=e.stringify=W}),r=(C.decode,C.parse,C.encode,C.stringify,f),K=O;function O(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var V=/^([a-z0-9.+-]+:)/i,Q=/:[0-9]*$/,Y=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),N=["'"].concat(l),tt=["%","/","?",";","#"].concat(N),et=["/","?","#"],nt=/^[+a-z0-9A-Z_-]{0,63}$/,rt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ot={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},Z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function f(t,e,n){var r;return t&&z(t)&&t instanceof O?t:((r=new O).parse(t,e,n),r)}O.prototype.parse=function(t,e,n){if(!_(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),r=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(r);o[0]=o[0].replace(/\\/g,"/");var s=(s=t=o.join(r)).trim();if(!n&&1===t.split("#").length){o=Y.exec(s);if(o)return this.path=s,this.href=s,this.pathname=o[1],o[2]?(this.search=o[2],this.query=e?C.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var i,r=V.exec(s);if(r&&(i=(r=r[0]).toLowerCase(),this.protocol=i,s=s.substr(r.length)),!(n||r||s.match(/^\/\/[^@\/]+@[^@\/]+/))||!(b="//"===s.substr(0,2))||r&&S[r]||(s=s.substr(2),this.slashes=!0),!S[r]&&(b||r&&!Z[r])){for(var a=-1,h=0;h<et.length;h++)-1!==(u=s.indexOf(et[h]))&&(-1===a||u<a)&&(a=u);-1!==(t=-1===a?s.lastIndexOf("@"):s.lastIndexOf("@",a))&&(o=s.slice(0,t),s=s.slice(t+1),this.auth=decodeURIComponent(o));for(var u,a=-1,h=0;h<tt.length;h++)-1!==(u=s.indexOf(tt[h]))&&(-1===a||u<a)&&(a=u);-1===a&&(a=s.length),this.host=s.slice(0,a),s=s.slice(a),this.parseHost(),this.hostname=this.hostname||"";n="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!n)for(var c=this.hostname.split(/\./),h=0,l=c.length;h<l;h++){var f=c[h];if(f&&!f.match(nt)){for(var p="",x=0,v=f.length;x<v;x++)127<f.charCodeAt(x)?p+="x":p+=f[x];if(!p.match(nt)){var d=c.slice(0,h),y=c.slice(h+1),g=f.match(rt);g&&(d.push(g[1]),y.unshift(g[2])),y.length&&(s="/"+y.join(".")+s),this.hostname=d.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),n||(this.hostname=B.toASCII(this.hostname));var m=this.port?":"+this.port:"",b=this.hostname||"";this.host=b+m,this.href+=this.host,n&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!ot[i])for(h=0,l=N.length;h<l;h++){var w,O=N[h];-1!==s.indexOf(O)&&((w=encodeURIComponent(O))===O&&(w=escape(O)),s=s.split(O).join(w))}r=s.indexOf("#"),-1!==r&&(this.hash=s.substr(r),s=s.slice(0,r)),t=s.indexOf("?");return-1!==t?(this.search=s.substr(t),this.query=s.substr(t+1),e&&(this.query=C.parse(this.query)),s=s.slice(0,t)):e&&(this.search="",this.query={}),s&&(this.pathname=s),Z[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(m=this.pathname||"",o=this.search||"",this.path=m+o),this.href=this.format(),this},O.prototype.format=function(){var t=this.auth||"",e=(t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@"),this.protocol||""),n=this.pathname||"",r=this.hash||"",o=!1,s="",t=(this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&z(this.query)&&Object.keys(this.query).length&&(s=C.stringify(this.query)),this.search||s&&"?"+s||"");return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||Z[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o=o||"",r&&"#"!==r.charAt(0)&&(r="#"+r),t&&"?"!==t.charAt(0)&&(t="?"+t),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(t=t.replace("#","%23"))+r},O.prototype.resolve=function(t){return this.resolveObject(f(t,!1,!0)).format()},O.prototype.resolveObject=function(t){_(t)&&((f=new O).parse(t,!1,!0),t=f);for(var e=new O,n=Object.keys(this),r=0;r<n.length;r++){var o=n[r];e[o]=this[o]}if(e.hash=t.hash,""!==t.href)if(t.slashes&&!t.protocol){for(var s=Object.keys(t),i=0;i<s.length;i++){var a=s[i];"protocol"!==a&&(e[a]=t[a])}Z[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/")}else if(t.protocol&&t.protocol!==e.protocol)if(Z[t.protocol]){if(e.protocol=t.protocol,t.host||S[t.protocol])e.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),e.pathname=h.join("/")}e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(f=e.pathname||"",p=e.search||"",e.path=f+p),e.slashes=e.slashes||t.slashes}else for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];e[l]=t[l]}else{var f=e.pathname&&"/"===e.pathname.charAt(0),p=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=p||f||e.host&&t.pathname,x=f,v=e.pathname&&e.pathname.split("/")||[],h=t.pathname&&t.pathname.split("/")||[],d=e.protocol&&!Z[e.protocol];if(d&&(e.hostname="",e.port=null,e.host&&(""===v[0]?v[0]=e.host:v.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),f=f&&(""===h[0]||""===v[0])),p)e.host=(t.host||""===t.host?t:e).host,e.hostname=(t.hostname||""===t.hostname?t:e).hostname,e.search=t.search,e.query=t.query,v=h;else if(h.length)(v=v||[]).pop(),v=v.concat(h),e.search=t.search,e.query=t.query;else if(!X(t.search))return d&&(e.hostname=e.host=v.shift(),(b=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=b.shift(),e.host=e.hostname=b.shift())),e.search=t.search,e.query=t.query,w(e.pathname)&&w(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.href=e.format(),e;if(v.length){for(var y=v.slice(-1)[0],p=(e.host||t.host||1<v.length)&&("."===y||".."===y)||""===y,g=0,m=v.length;0<=m;m--)"."===(y=v[m])?v.splice(m,1):".."===y?(v.splice(m,1),g++):g&&(v.splice(m,1),g--);if(!f&&!x)for(;g--;)v.unshift("..");!f||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),p&&"/"!==v.join("/").substr(-1)&&v.push("");var b,x=""===v[0]||v[0]&&"/"===v[0].charAt(0);d&&(e.hostname=e.host=!x&&v.length?v.shift():"",(b=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=b.shift(),e.host=e.hostname=b.shift())),(f=f||e.host&&v.length)&&!x&&v.unshift(""),v.length?e.pathname=v.join("/"):(e.pathname=null,e.path=null),w(e.pathname)&&w(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes}else e.pathname=null,e.search?e.path="/"+e.search:e.path=null}return e.href=e.format(),e},O.prototype.parseHost=function(){var t=this.host,e=Q.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var p,st={parse:r,resolve:H,resolveObject:$,format:G,Url:K},x=(s.settings.RETINA_PREFIX=/@([0-9\.]+)x/,!(s.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0));var it=function(){for(var t=[],e=[],n=0;n<32;n++)e[t[n]=n]=n;t[o.BLEND_MODES.NORMAL_NPM]=o.BLEND_MODES.NORMAL,t[o.BLEND_MODES.ADD_NPM]=o.BLEND_MODES.ADD,t[o.BLEND_MODES.SCREEN_NPM]=o.BLEND_MODES.SCREEN,e[o.BLEND_MODES.NORMAL]=o.BLEND_MODES.NORMAL_NPM,e[o.BLEND_MODES.ADD]=o.BLEND_MODES.ADD_NPM,e[o.BLEND_MODES.SCREEN]=o.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();var at=0;var d=Object.create(null),y=Object.create(null);function g(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||s.settings.RESOLUTION,this.resize(t,e)}var m,l={width:{configurable:!0},height:{configurable:!0}},ht=(g.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},g.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},g.prototype.destroy=function(){this.context=null,this.canvas=null},l.width.get=function(){return this.canvas.width},l.width.set=function(t){this.canvas.width=t},l.height.get=function(){return this.canvas.height},l.height.set=function(t){this.canvas.height=t},Object.defineProperties(g.prototype,l),/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i);var ut={};return Object.defineProperty(t,"isMobile",{enumerable:!0,get:function(){return s.isMobile}}),t.BaseTextureCache=y,t.CanvasRenderTarget=g,t.DATA_URI=ht,t.EventEmitter=b,t.ProgramCache={},t.TextureCache=d,t.clearTextureCache=function(){for(var t in d)delete d[t];for(t in y)delete y[t]},t.correctBlendMode=function(t,e){return it[e?1:0][t]},t.createIndicesForQuads=function(t,e){var n=6*t;if((e=(e=void 0===e?null:e)||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var r=0,o=0;r<n;r+=6,o+=4)e[r+0]=o+0,e[r+1]=o+1,e[r+2]=o+2,e[r+3]=o+0,e[r+4]=o+2,e[r+5]=o+3;return e},t.decomposeDataUri=function(t){if(t=ht.exec(t))return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}},t.deprecation=function(t,e,n){var r;void 0===n&&(n=3),ut[e]||(void 0===(r=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),ut[e]=!0)},t.destroyTextureCache=function(){for(var t in d)d[t].destroy();for(t in y)y[t].destroy()},t.determineCrossOrigin=function(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,(m=m||document.createElement("a")).href=t;var n=!(t=st.parse(m.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&n&&t.protocol===e.protocol?"":"anonymous"},t.earcut=n,t.getResolutionOfUrl=function(t,e){return(t=s.settings.RETINA_PREFIX.exec(t))?parseFloat(t[1]):void 0!==e?e:1},t.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},t.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},t.isPow2=function(t){return!(t&t-1||!t)},t.isWebGLSupported=function(){return p=void 0===p?function(){var t,e,n,r,o={stencil:!0,failIfMajorPerformanceCaveat:s.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{return window.WebGLRenderingContext?(n=!(!(e=(t=document.createElement("canvas")).getContext("webgl",o)||t.getContext("experimental-webgl",o))||!e.getContextAttributes().stencil),e&&(r=e.getExtension("WEBGL_lose_context"))&&r.loseContext(),e=null,n):!1}catch(t){return!1}}():p},t.log2=function(t){var e=(65535<t)<<4,n=(255<(t>>>=e))<<3;return(e|=n)|(n=(15<(t>>>=n))<<2)|(n=(3<(t>>>=n))<<1)|(t>>>=n)>>1},t.nextPow2=function(t){return t+=0===t,--t,(t=(t=(t=(t=(t|=t>>>1)|t>>>2)|t>>>4)|t>>>8)|t>>>16)+1},t.premultiplyBlendMode=it,t.premultiplyRgba=function(t,e,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n},t.premultiplyTint=function(t,e){return 1===e?(255*e<<24)+t:0===e?0:(255*e<<24)+(((t>>16&255)*e+.5|0)<<16)+(((t>>8&255)*e+.5|0)<<8)+((255&t)*e+.5|0)},t.premultiplyTintToRgba=function(t,e,n,r){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,!r&&void 0!==r||(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n},t.removeItems=function(t,e,n){var r=t.length;if(!(r<=e||0===n)){for(var o=r-(n=r<e+n?r-e:n),s=e;s<o;++s)t[s]=t[s+n];t.length=o}},t.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},t.sayHello=function(t){x||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?window.console.log.apply(console,["\n %c %c %c PixiJS 5.1.5 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("PixiJS 5.1.5 - "+t+" - http://www.pixijs.com/"),x=!0)},t.sign=function(t){return 0===t?0:t<0?-1:1},t.skipHello=function(){x=!0},t.string2hex=function(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)},t.trimCanvas=function(t){for(var e,n,r=t.width,o=t.height,s=(t=t.getContext("2d")).getImageData(0,0,r,o).data,i=s.length,a={top:null,left:null,right:null,bottom:null},h=null,u=0;u<i;u+=4)0!==s[u+3]&&(e=u/4%r,n=~~(u/4/r),null===a.top&&(a.top=n),(null===a.left||e<a.left)&&(a.left=e),(null===a.right||a.right<e)&&(a.right=1+e),(null===a.bottom||a.bottom<n)&&(a.bottom=n));return null!==a.top&&(r=a.right-a.left,o=a.bottom-a.top+1,h=t.getImageData(a.left,a.top,r,o)),{height:o,width:r,data:h}},t.uid=function(){return++at},t.url=st,t}({},PIXI,PIXI);Object.assign(this.PIXI.utils,_pixi_utils);
this.PIXI=this.PIXI||{};var _pixi_display=function(t,e,n,r){"use strict";e.settings.SORTABLE_CHILDREN=!1;function o(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}o.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},o.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},o.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((t=t||new n.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},o.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},o.prototype.addQuad=function(t){var i=this.minX,e=this.minY,n=this.maxX,s=this.maxY,r=t[0],o=t[1],i=r<i?r:i,e=o<e?o:e,n=n<r?r:n,s=s<o?o:s;i=(r=t[2])<i?r:i,e=(o=t[3])<e?o:e,n=n<r?r:n,s=s<o?o:s,i=(r=t[4])<i?r:i,e=(o=t[5])<e?o:e,n=n<r?r:n,s=s<o?o:s,r=t[6],e=(o=t[7])<e?o:e,n=n<r?r:n,s=s<o?o:s,this.minX=i=r<i?r:i,this.minY=e,this.maxX=n,this.maxY=s},o.prototype.addFrame=function(t,i,e,n,s){var t=t.worldTransform,r=t.a,o=t.b,h=t.c,a=t.d,l=t.tx,t=t.ty,d=r*i+h*e+l,m=o*i+a*e+t,p=d<(p=this.minX)?d:p,u=m<(u=this.minY)?m:u,c=(c=this.maxX)<d?d:c,f=(f=this.maxY)<m?m:f;p=(d=r*n+h*e+l)<p?d:p,u=(m=o*n+a*e+t)<u?m:u,c=c<d?d:c,f=f<m?m:f,p=(d=r*i+h*s+l)<p?d:p,u=(m=o*i+a*s+t)<u?m:u,f=f<m?m:f,u=(m=o*n+a*s+t)<u?m:u,c=(c=c<d?d:c)<(d=r*n+h*s+l)?d:c,f=f<m?m:f,this.minX=p=d<p?d:p,this.minY=u,this.maxX=c,this.maxY=f},o.prototype.addVertexData=function(t,i,e){for(var n=this.minX,s=this.minY,r=this.maxX,o=this.maxY,h=i;h<e;h+=2)var a=t[h],l=t[h+1],n=a<n?a:n,s=l<s?l:s,r=r<a?a:r,o=o<l?l:o;this.minX=n,this.minY=s,this.maxX=r,this.maxY=o},o.prototype.addVertices=function(t,i,e,n){for(var t=t.worldTransform,s=t.a,r=t.b,o=t.c,h=t.d,a=t.tx,l=t.ty,d=this.minX,m=this.minY,p=this.maxX,u=this.maxY,c=e;c<n;c+=2)var f=i[c],y=i[c+1],_=s*f+o*y+a,y=h*y+r*f+l,d=_<d?_:d,m=y<m?y:m,p=p<_?_:p,u=u<y?y:u;this.minX=d,this.minY=m,this.maxX=p,this.maxY=u},o.prototype.addBounds=function(t){var i=this.minX,e=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<i?t.minX:i,this.minY=t.minY<e?t.minY:e,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},o.prototype.addBoundsMask=function(t,i){var e,n,s,r=(t.minX>i.minX?t:i).minX,o=(t.minY>i.minY?t:i).minY,h=(t.maxX<i.maxX?t:i).maxX,t=(t.maxY<i.maxY?t:i).maxY;r<=h&&o<=t&&(i=this.minX,e=this.minY,n=this.maxX,s=this.maxY,this.minX=r<i?r:i,this.minY=o<e?o:e,this.maxX=n<h?h:n,this.maxY=s<t?t:s)},o.prototype.addBoundsArea=function(t,i){var e,n,s,r=t.minX>i.x?t.minX:i.x,o=t.minY>i.y?t.minY:i.y,h=t.maxX<i.x+i.width?t.maxX:i.x+i.width,t=t.maxY<i.y+i.height?t.maxY:i.y+i.height;r<=h&&o<=t&&(i=this.minX,e=this.minY,n=this.maxX,s=this.maxY,this.minX=r<i?r:i,this.minY=o<e?o:e,this.maxX=n<h?h:n,this.maxY=s<t?t:s)};var i=function(t){function s(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new n.Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new o,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1}t&&(s.__proto__=t);var i={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return((s.prototype=Object.create(t&&t.prototype)).constructor=s).mixin=function(t){for(var i=Object.keys(t),e=0;e<i.length;++e){var n=i[e];Object.defineProperty(s.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},i._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new s),this.tempDisplayObjectParent},s.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},s.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},s.prototype.getBounds=function(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new n.Rectangle),i=this._boundsRect),this._bounds.getRectangle(i)},s.prototype.getLocalBounds=function(t){var i=this.transform,e=this.parent,t=(this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),t=this._localBoundsRect),this.getBounds(!1,t));return this.parent=e,this.transform=i,t},s.prototype.toGlobal=function(t,i,e){return(e=void 0===e?!1:e)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)},s.prototype.toLocal=function(t,i,e,n){return i&&(t=i.toGlobal(t,e,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,e)},s.prototype.render=function(t){},s.prototype.setParent=function(t){if(t&&t.addChild)return t.addChild(this),t;throw new Error("setParent: Argument must be a Container")},s.prototype.setTransform=function(t,i,e,n,s,r,o,h,a){return void 0===i&&(i=0),void 0===e&&(e=1),void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===a&&(a=0),this.position.x=t=void 0===t?0:t,this.position.y=i,this.scale.x=e||1,this.scale.y=n||1,this.rotation=s,this.skew.x=r,this.skew.y=o,this.pivot.x=h,this.pivot.y=a,this},s.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i.x.get=function(){return this.position.x},i.x.set=function(t){this.transform.position.x=t},i.y.get=function(){return this.position.y},i.y.set=function(t){this.transform.position.y=t},i.worldTransform.get=function(){return this.transform.worldTransform},i.localTransform.get=function(){return this.transform.localTransform},i.position.get=function(){return this.transform.position},i.position.set=function(t){this.transform.position.copyFrom(t)},i.scale.get=function(){return this.transform.scale},i.scale.set=function(t){this.transform.scale.copyFrom(t)},i.pivot.get=function(){return this.transform.pivot},i.pivot.set=function(t){this.transform.pivot.copyFrom(t)},i.skew.get=function(){return this.transform.skew},i.skew.set=function(t){this.transform.skew.copyFrom(t)},i.rotation.get=function(){return this.transform.rotation},i.rotation.set=function(t){this.transform.rotation=t},i.angle.get=function(){return this.transform.rotation*n.RAD_TO_DEG},i.angle.set=function(t){this.transform.rotation=t*n.DEG_TO_RAD},i.zIndex.get=function(){return this._zIndex},i.zIndex.set=function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},i.worldVisible.get=function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},i.mask.get=function(){return this._mask},i.mask.set=function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)},Object.defineProperties(s.prototype,i),s}(r.EventEmitter);function h(t,i){return t.zIndex===i.zIndex?t._lastSortedIndex-i._lastSortedIndex:t.zIndex-i.zIndex}i.prototype.displayObjectUpdateTransform=i.prototype.updateTransform;var s=function(s){function t(){s.call(this),this.children=[],this.sortableChildren=e.settings.SORTABLE_CHILDREN,this.sortDirty=!1}s&&(t.__proto__=s);var i={width:{configurable:!0},height:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.onChildrenChange=function(){},t.prototype.addChild=function(t){var i=arguments,e=arguments.length;if(1<e)for(var n=0;n<e;n++)this.addChild(i[n]);else t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this);return t},t.prototype.addChildAt=function(t,i){if(i<0||i>this.children.length)throw new Error(t+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(i,0,t),this._boundsID++,this.onChildrenChange(i),t.emit("added",this),this.emit("childAdded",t,this,i),t},t.prototype.swapChildren=function(t,i){var e,n;t!==i&&(e=this.getChildIndex(t),n=this.getChildIndex(i),this.children[e]=i,this.children[n]=t,this.onChildrenChange(e<n?e:n))},t.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(t,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var e=this.getChildIndex(t);r.removeItems(this.children,e,1),this.children.splice(i,0,t),this.onChildrenChange(i)},t.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},t.prototype.removeChild=function(t){var i=arguments,e=arguments.length;if(1<e)for(var n=0;n<e;n++)this.removeChild(i[n]);else{var s=this.children.indexOf(t);if(-1===s)return null;t.parent=null,t.transform._parentID=-1,r.removeItems(this.children,s,1),this._boundsID++,this.onChildrenChange(s),t.emit("removed",this),this.emit("childRemoved",t,this,s)}return t},t.prototype.removeChildAt=function(t){var i=this.getChildAt(t);return i.parent=null,i.transform._parentID=-1,r.removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),i.emit("removed",this),this.emit("childRemoved",i,this,t),i},t.prototype.removeChildren=function(t,i){var e=t=void 0===t?0:t,i="number"==typeof i?i:this.children.length,n=i-e;if(0<n&&n<=i){for(var s=this.children.splice(e,n),r=0;r<s.length;++r)s[r].parent=null,s[r].transform&&(s[r].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}if(0==n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var t=!1,i=0,e=this.children.length;i<e;++i){var n=this.children[i];n._lastSortedIndex=i,t||0===n.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(h),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,i=this.children.length;t<i;++t){var e=this.children[t];e.visible&&e.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var i=this.children[t];i.visible&&i.renderable&&(i.calculateBounds(),i._mask?(i._mask.calculateBounds(),this._bounds.addBoundsMask(i._bounds,i._mask._bounds)):i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var i=0,e=this.children.length;i<e;++i)this.children[i].render(t)}},t.prototype.renderAdvanced=function(t){t.batch.flush();var i=this.filters,e=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]);for(var n=this._enabledFilters.length=0;n<i.length;n++)i[n].enabled&&this._enabledFilters.push(i[n]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}e&&t.mask.push(this,this._mask),this._render(t);for(var s=0,r=this.children.length;s<r;s++)this.children[s].render(t);t.batch.flush(),e&&t.mask.pop(this,this._mask),i&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},t.prototype._render=function(t){},t.prototype.destroy=function(t){s.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof t?t:t&&t.children,e=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<e.length;++n)e[n].destroy(t)},i.width.get=function(){return this.scale.x*this.getLocalBounds().width},i.width.set=function(t){var i=this.getLocalBounds().width;this.scale.x=0!==i?t/i:1,this._width=t},i.height.get=function(){return this.scale.y*this.getLocalBounds().height},i.height.set=function(t){var i=this.getLocalBounds().height;this.scale.y=0!==i?t/i:1,this._height=t},Object.defineProperties(t.prototype,i),t}(i);return s.prototype.containerUpdateTransform=s.prototype.updateTransform,t.Bounds=o,t.Container=s,t.DisplayObject=i,t}({},PIXI,PIXI,PIXI.utils);Object.assign(this.PIXI,_pixi_display);
this.PIXI=this.PIXI||{};var _pixi_core=function(t,n,C,I,p,i,h,U){"use strict";function g(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new n.Runner("setRealSize",2),this.onUpdate=new n.Runner("update"),this.onError=new n.Runner("onError",1)}var e={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}},e=(g.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.run(this._width,this._height)},g.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},g.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.run(t,e))},e.valid.get=function(){return!!this._width&&!!this._height},g.prototype.update=function(){this.destroyed||this.onUpdate.run()},g.prototype.load=function(){return Promise.resolve()},e.width.get=function(){return this._width},e.height.get=function(){return this._height},g.prototype.upload=function(t,e,r){return!1},g.prototype.style=function(t,e,r){return!1},g.prototype.dispose=function(){},g.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(g.prototype,e),function(i){function t(t){var e=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;i.call(this,e,r),this.source=t,this.noSubImage=!1}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=C.determineCrossOrigin(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},t.prototype.upload=function(t,e,r,i){var t=t.gl,n=e.realWidth,o=e.realHeight;return i=i||this.source,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),this.noSubImage||e.target!==t.TEXTURE_2D||r.width!==n||r.height!==o?(r.width=n,r.height=o,t.texImage2D(e.target,0,e.format,e.format,e.type,i)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},t.prototype.update=function(){var t,e;this.destroyed||(t=this.source.naturalWidth||this.source.videoWidth||this.source.width,e=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.resize(t,e),i.prototype.update.call(this))},t.prototype.dispose=function(){this.source=null},t}(g)),u=function(s){function t(t,e){var r;e=e||{},t instanceof HTMLImageElement||(r=new Image,s.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),s.call(this,t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==e.createBitmap?e.createBitmap:I.settings.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.premultiplyAlpha=!1!==e.premultiplyAlpha,this.bitmap=null,this._load=null,!1!==e.autoLoad&&this.load()}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.load=function(t){var i=this;return void 0!==t&&(this.createBitmap=t),this._load||(this._load=new Promise(function(t){i.url=i.source.src;function e(){i.destroyed||(r.onload=null,r.onerror=null,i.resize(r.width,r.height),i._load=null,i.createBitmap?t(i.process()):t(i))}var r=i.source;r.complete&&r.src?e():(r.onload=e,r.onerror=function(t){return i.onError.run(t)})})),this._load},t.prototype.process=function(){var e=this;if(null===this._process){if(null!==this.bitmap||!window.createImageBitmap)return Promise.resolve(this);this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})}return this._process},t.prototype.upload=function(t,e,r){if(e.premultiplyAlpha=this.premultiplyAlpha,!this.createBitmap)return s.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(s.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0;for(i in e._glTextures){var o=e._glTextures[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,s.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t}(e),s=[];function B(t,e){if(!t)return null;var r,i="";"string"==typeof t&&(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=s.length-1;0<=n;--n){var o=s[n];if(o.test&&o.test(t,i))return new o(t,e)}return new u(t,e)}function r(t){this.renderer=t}function o(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new n.Runner("disposeFramebuffer",2)}function l(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var a=function(i){function t(t,e){var e=e||{},r=e.width,e=e.height;if(!r||!e)throw new Error("BufferResource width or height invalid");i.call(this,r,e),this.data=t}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.upload=function(t,e,r){t=t.gl;return t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),r.width===e.width&&r.height===e.height?t.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,t.texImage2D(e.target,0,r.internalFormat,e.width,e.height,0,e.format,r.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},t}(g),L={scaleMode:p.SCALE_MODES.NEAREST,format:p.FORMATS.RGBA,premultiplyAlpha:!1},R=function(f){function o(t,e){void 0===t&&(t=null),void 0===e&&(e=null),f.call(this);var r=(e=e||{}).premultiplyAlpha,i=e.mipmap,n=e.anisotropicLevel,o=e.scaleMode,s=e.width,a=e.height,h=e.wrapMode,u=e.format,l=e.type,d=e.target,c=e.resolution,e=e.resourceOptions;!t||t instanceof g||((t=B(t,e)).internal=!0),this.width=s||0,this.height=a||0,this.resolution=c||I.settings.RESOLUTION,this.mipmap=void 0!==i?i:I.settings.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==n?n:I.settings.ANISOTROPIC_LEVEL,this.wrapMode=h||I.settings.WRAP_MODE,this.scaleMode=void 0!==o?o:I.settings.SCALE_MODE,this.format=u||p.FORMATS.RGBA,this.type=l||p.TYPES.UNSIGNED_BYTE,this.target=d||p.TARGETS.TEXTURE_2D,this.premultiplyAlpha=!1!==r,this.uid=C.uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=0<s&&0<a,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this.setResource(t)}f&&(o.__proto__=f),(o.prototype=Object.create(f&&f.prototype)).constructor=o;var t={realWidth:{configurable:!0},realHeight:{configurable:!0}};return t.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},t.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},o.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},o.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},o.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},o.prototype._refreshPOT=function(){this.isPowerOfTwo=C.isPow2(this.realWidth)&&C.isPow2(this.realHeight)},o.prototype.setResolution=function(t){var e=this.resolution;return e!==t&&(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},o.prototype.setResource=function(t){if(this.resource!==t){if(this.resource)throw new Error("Resource can be set only once");t.bind(this),this.resource=t}return this},o.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},o.prototype.onError=function(t){this.emit("error",this,t)},o.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete C.BaseTextureCache[this.cacheId],delete C.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),o.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},o.prototype.dispose=function(){this.emit("dispose",this)},o.from=function(t,e){var r=null,r="string"==typeof t?t:(t._pixiId||(t._pixiId="pixiid_"+C.uid()),t._pixiId),i=C.BaseTextureCache[r];return i||((i=new o(t,e)).cacheId=r,o.addToCache(i,r)),i},o.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new a(t,{width:e,height:r}),t=t instanceof Float32Array?p.TYPES.FLOAT:p.TYPES.UNSIGNED_BYTE;return new o(n,Object.assign(L,i||{width:e,height:r,type:t}))},o.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),C.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),C.BaseTextureCache[e]=t)},o.removeFromCache=function(t){if("string"==typeof t){var e,r=C.BaseTextureCache[t];if(r)return-1<(e=r.textureCacheIds.indexOf(t))&&r.textureCacheIds.splice(e,1),delete C.BaseTextureCache[t],r}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete C.BaseTextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperties(o.prototype,t),o}(C.EventEmitter),d=(R._globalBatch=0,function(a){function t(t,e){e=e||{};var r,i=t;Array.isArray(t)&&(i=(r=t).length),a.call(this,e.width,e.height),this.items=[],this.itemDirtyIds=[];for(var n=0;n<i;n++){var o=new R;this.items.push(o),this.itemDirtyIds.push(-1)}if(this.length=i,this._load=null,r)for(var s=0;s<i;s++)this.addResourceAt(B(r[s],e),s)}return a&&(t.__proto__=a),((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(t,e){if(this.items[e])return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this;throw new Error("Index "+e+" is out of bounds")},t.prototype.bind=function(t){a.prototype.bind.call(this,t),t.target=p.TARGETS.TEXTURE_2D_ARRAY;for(var e=0;e<this.length;e++)this.items[e].on("update",t.update,t)},t.prototype.unbind=function(t){a.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].off("update",t.update,t)},t.prototype.load=function(){var r,t,i=this;return this._load||(t=(r=this.items.map(function(t){return t.resource})).map(function(t){return t.load()}),this._load=Promise.all(t).then(function(){var t=r[0],e=t.width,t=t.height;return i.resize(e,t),Promise.resolve(i)})),this._load},t.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,o=this.items,s=t.gl;r.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=o[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},t}(g)),c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(e),f=function(i){function s(t,e){if(i.call(this,t,e=e||{}),this.length!==s.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var r=0;r<s.SIDES;r++)this.items[r].target=p.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+r;!1!==e.autoLoad&&this.load()}return i&&(s.__proto__=i),((s.prototype=Object.create(i&&i.prototype)).constructor=s).prototype.bind=function(t){i.prototype.bind.call(this,t),t.target=p.TARGETS.TEXTURE_CUBE_MAP},s.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<s.SIDES;n++){var o=this.items[n];i[n]<o.dirtyId&&(i[n]=o.dirtyId,o.valid&&o.resource.upload(t,o,r))}return!0},s}(d),_=(f.SIDES=6,function(r){function i(t,e){e=e||{},r.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}return r&&(i.__proto__=r),((i.prototype=Object.create(r&&r.prototype)).constructor=i).prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()})),this._load},i.prototype._loadSvg=function(){var o=this,s=new Image;r.crossOrigin(s,this.svg,this._crossorigin),s.src=this.svg,s.onerror=function(t){s.onerror=null,o.onError.run(t)},s.onload=function(){var t=s.width,e=s.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*o.scale,i=e*o.scale,n=((o._overrideWidth||o._overrideHeight)&&(r=o._overrideWidth||o._overrideHeight/e*t,i=o._overrideHeight||o._overrideWidth/t*e),r=Math.round(r),i=Math.round(i),o.source);n.width=r,n.height=i,n._pixiId="canvas_"+C.uid(),n.getContext("2d").drawImage(s,0,0,t,e,0,0,r,i),o._resolve(),o._resolve=null}},i.getSize=function(t){var t=i.SVG_SIZE.exec(t),e={};return t&&(e[t[1]]=Math.round(parseFloat(t[3])),e[t[5]]=Math.round(parseFloat(t[7]))),e},i.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},i.test=function(t,e){return"svg"===e||"string"==typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"==typeof t&&0===t.indexOf("<svg")},i}(e)),m=(_.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,function(h){function r(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){var r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),h.crossOrigin(r,(t="string"==typeof t?[t]:t)[0].src||t[0],e.crossorigin);for(var i=0;i<t.length;++i){var n=document.createElement("source"),o=t[i],s=o.src,o=o.mime,a=(s=s||t[i]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),o=o||"video/"+a;n.src=s,n.type=o,r.appendChild(n)}t=r}h.call(this,t),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}h&&(r.__proto__=h);var t={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return((r.prototype=Object.create(h&&h.prototype)).constructor=r).prototype.update=function(t){var e;void 0===t&&(t=0),this.destroyed||(e=i.Ticker.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(h.prototype.update.call(this,t),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},r.prototype.load=function(){var e,r=this;return this._load||(((e=this.source).readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){r.valid?t(r):(r._resolve=t,e.load())})),this._load},r.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},r.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},r.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},r.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(i.Ticker.shared.add(this.update,this),this._isAutoUpdating=!0)},r.prototype._onPlayStop=function(){this._isAutoUpdating&&(i.Ticker.shared.remove(this.update,this),this._isAutoUpdating=!1)},r.prototype._onCanPlay=function(){var t=this.source,e=(t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),this.valid);this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},r.prototype.dispose=function(){this._isAutoUpdating&&i.Ticker.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),h.prototype.dispose.call(this)},t.autoUpdate.get=function(){return this._autoUpdate},t.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(i.Ticker.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(i.Ticker.shared.add(this.update,this),this._isAutoUpdating=!0))},t.updateFPS.get=function(){return this._updateFPS},t.updateFPS.set=function(t){t!==this._updateFPS&&(this._updateFPS=t)},r.test=function(t,e){return t instanceof HTMLVideoElement||-1<r.TYPES.indexOf(e)},Object.defineProperties(r.prototype,t),r}(e)),v=(m.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(e)),d=(s.push(u,v,c,m,_,a,f,d),{INSTALLED:s,autoDetectResource:B,ArrayResource:d,BufferResource:a,CanvasResource:c,CubeResource:f,ImageResource:u,ImageBitmapResource:v,SVGResource:_,VideoResource:m,Resource:g,BaseImageResource:e}),k=(r.prototype.destroy=function(){this.renderer=null},function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.upload=function(t,e,r){t=t.gl;return t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),r.width===e.width&&r.height===e.height?t.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,t.texImage2D(e.target,0,t.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(a)),v={colorTexture:{configurable:!0}},y=(v.colorTexture.get=function(){return this.colorTextures[0]},o.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new R(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},o.prototype.addDepthTexture=function(t){return this.depthTexture=t||new R(new k(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:p.FORMATS.DEPTH_COMPONENT,type:p.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},o.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},o.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},o.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r,i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],o=n.resolution;n.setSize(t/o,e/o)}this.depthTexture&&(r=this.depthTexture.resolution,this.depthTexture.setSize(t/r,e/r))}},o.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(o.prototype,v),function(r){function t(t){r.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t);var t=t||{},e=t.width,t=t.height;this.mipmap=!1,this.width=Math.ceil(e)||100,this.height=Math.ceil(t)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new o(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.stencilMaskStack=[],this.filterStack=[{}]}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this,!0),this.framebuffer=null},t}(R)),G=(l.prototype.set=function(t,e,r){var i,n,o,s,a=e.width,e=e.height;r?(i=t.width/2/a,n=t.height/2/e,o=t.x/a+i,s=t.y/e+n,r=h.GroupD8.add(r,h.GroupD8.NW),this.x0=o+i*h.GroupD8.uX(r),this.y0=s+n*h.GroupD8.uY(r),r=h.GroupD8.add(r,2),this.x1=o+i*h.GroupD8.uX(r),this.y1=s+n*h.GroupD8.uY(r),r=h.GroupD8.add(r,2),this.x2=o+i*h.GroupD8.uX(r),this.y2=s+n*h.GroupD8.uY(r),r=h.GroupD8.add(r,2),this.x3=o+i*h.GroupD8.uX(r),this.y3=s+n*h.GroupD8.uY(r)):(this.x0=t.x/a,this.y0=t.y/e,this.x1=(t.x+t.width)/a,this.y1=t.y/e,this.x2=(t.x+t.width)/a,this.y2=(t.y+t.height)/e,this.x3=t.x/a,this.y3=(t.y+t.height)/e),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},new l),_=function(s){function a(t,e,r,i,n,o){if(s.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new h.Rectangle(0,0,1,1)),t instanceof a&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=G,this.uvMatrix=null,this.orig=r||e,this._rotate=Number(n||0),!0===n)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new h.Point(o.x,o.y):new h.Point(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}s&&(a.__proto__=s);var t={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return((a.prototype=Object.create(s&&s.prototype)).constructor=a).prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},a.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},a.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&C.TextureCache[t.url]&&a.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,a.removeFromCache(this),this.textureCacheIds=null},a.prototype.clone=function(){return new a(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},a.prototype.updateUvs=function(){this._uvs===G&&(this._uvs=new l),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},a.from=function(t,e){void 0===e&&(e={});var r=null,r="string"==typeof t?t:(t._pixiId||(t._pixiId="pixiid_"+C.uid()),t._pixiId),i=C.TextureCache[r];return i||(e.resolution||(e.resolution=C.getResolutionOfUrl(t)),(i=new a(new R(t,e))).baseTexture.cacheId=r,R.addToCache(i.baseTexture,r),a.addToCache(i,r)),i},a.fromBuffer=function(t,e,r,i){return new a(R.fromBuffer(t,e,r,i))},a.fromLoader=function(t,e,r){t=new u(t);t.url=e;t=new a(new R(t,{scaleMode:I.settings.SCALE_MODE,resolution:C.getResolutionOfUrl(e)}));return R.addToCache(t.baseTexture,r=r||e),a.addToCache(t,r),r!==e&&(R.addToCache(t.baseTexture,e),a.addToCache(t,e)),t},a.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),C.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),C.TextureCache[e]=t)},a.removeFromCache=function(t){if("string"==typeof t){var e,r=C.TextureCache[t];if(r)return-1<(e=r.textureCacheIds.indexOf(t))&&r.textureCacheIds.splice(e,1),delete C.TextureCache[t],r}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)C.TextureCache[t.textureCacheIds[i]]===t&&delete C.TextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},t.resolution.get=function(){return this.baseTexture.resolution},t.frame.get=function(){return this._frame},t.frame.set=function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,o=e+i>this.baseTexture.width,s=r+n>this.baseTexture.height;if(o||s)throw e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height,new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(o&&s?"and":"or")+" "+r);this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},t.rotate.get=function(){return this._rotate},t.rotate.set=function(t){this._rotate=t,this.valid&&this.updateUvs()},t.width.get=function(){return this.orig.width},t.height.get=function(){return this.orig.height},Object.defineProperties(a.prototype,t),a}(C.EventEmitter);function V(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}_.EMPTY=new _(new R),V(_.EMPTY),V(_.EMPTY.baseTexture),_.WHITE=((m=document.createElement("canvas")).width=16,m.height=16,(e=m.getContext("2d")).fillStyle="white",e.fillRect(0,0,16,16),new _(new R(new c(m)))),V(_.WHITE),V(_.WHITE.baseTexture);function x(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}function E(t,e,r,i,n,o,s){void 0===r&&(r=!1),void 0===i&&(i=5126),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=o,this.instance=s}function T(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=z++,this.disposeRunner=new n.Runner("disposeBuffer",2)}var X=function(a){function e(t,e){var r,i,n,o,s=null;t instanceof y||(r=arguments[1],i=arguments[2],n=arguments[3],o=arguments[4],console.warn("Please use RenderTexture.create("+r+", "+i+") instead of the ctor directly."),s=arguments[0],e=null,t=new y({width:r,height:i,scaleMode:n,resolution:o})),a.call(this,t,e),this.legacyRenderer=s,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return a&&(e.__proto__=a),((e.prototype=Object.create(a&&a.prototype)).constructor=e).prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return new e(new y(t="number"==typeof t?{width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t))},e}(_),z=(x.prototype.createTexture=function(t,e){t=new y(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new X(t)},x.prototype.getOptimalTexture=function(t,e,r){var i=x.SCREEN_KEY,n=(t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=C.nextPow2(t)))<<16|65535&(e=C.nextPow2(e))),this.texturePool[i]||(this.texturePool[i]=[]),this.texturePool[i].pop());return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},x.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},x.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},x.prototype.returnFilterTexture=function(t){this.returnTexture(t)},x.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},x.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=x.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},x.SCREEN_KEY="screen",E.prototype.destroy=function(){this.buffer=null},E.from=function(t,e,r,i,n){return new E(t,e,r,i,n)},0);function j(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}T.prototype.update=function(t){this.data=t||this.data,this._updateID++},T.prototype.dispose=function(){this.disposeRunner.run(this,!1)},T.prototype.destroy=function(){this.dispose(),this.data=null},T.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new T(t)};var H={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function b(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=q++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new n.Runner("disposeGeometry",2),this.refCount=0}function w(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=J++,this.static=!!e}function W(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.filters=[]}function S(t){this.renderer=t}function Y(t){this.buffer=t,this.updateID=-1,this.byteLength=-1,this.refCount=0}var K={5126:4,5123:2,5121:1},q=0,Z={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Q=(b.prototype.addAttribute=function(t,e,r,i,n,o,s,a){if(void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new T(e));var h=t.split("|");if(1<h.length)for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);else{var l=this.buffers.indexOf(e);-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new E(l,r,i,n,o,s,a),this.instanced=this.instanced||a}return this},b.prototype.getAttribute=function(t){return this.attributes[t]},b.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},b.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new T(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},b.prototype.getIndex=function(){return this.indexBuffer},b.prototype.interleave=function(){if(!(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)){var t,e=[],r=[],i=new T;for(t in this.attributes){var n=this.attributes[t],o=this.buffers[n.buffer];e.push(o.data),r.push(n.size*K[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},o=0;o<t.length;o++)i+=e[o],r+=t[o].length;for(var s=new ArrayBuffer(4*r),a=null,h=0,u=0;u<t.length;u++){var l=e[u],d=t[u],c=j(d);n[c]||(n[c]=new H[c](s));for(var a=n[c],f=0;f<d.length;f++)a[(f/l|0)*i+h+f%l]=d[f];h+=l}return new Float32Array(s)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer)}return this},b.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},b.prototype.dispose=function(){this.disposeRunner.run(this,!1)},b.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer.destroy(),this.attributes=null},b.prototype.clone=function(){for(var t,e=new b,r=0;r<this.buffers.length;r++)e.buffers[r]=new T(this.buffers[r].data.slice());for(t in this.attributes){var i=this.attributes[t];e.attributes[t]=new E(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},b.merge=function(t){for(var e=new b,r=[],i=[],n=[],o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.buffers.length;a++)i[a]=i[a]||0,i[a]+=s.buffers[a].data.length,n[a]=0;for(var h=0;h<s.buffers.length;h++)r[h]=new Z[j(s.buffers[h].data)](i[h]),e.buffers[h]=new T(r[h]);for(var u=0;u<t.length;u++){s=t[u];for(var l=0;l<s.buffers.length;l++)r[l].set(s.buffers[l].data,n[l]),n[l]+=s.buffers[l].data.length}if(e.attributes=s.attributes,s.indexBuffer){e.indexBuffer=e.buffers[s.buffers.indexOf(s.indexBuffer)],e.indexBuffer.index=!0;for(var d,c=0,f=0,p=0,g=0,_=0;_<s.buffers.length;_++)if(s.buffers[_]!==s.indexBuffer){g=_;break}for(d in s.attributes){var m=s.attributes[d];(0|m.buffer)===g&&(f+=m.size*K[m.type]/4)}for(var v=0;v<t.length;v++){for(var y=t[v].indexBuffer.data,x=0;x<y.length;x++)e.indexBuffer.data[x+p]+=c;c+=s.buffers[g].data.length/f,p+=y.length}}return e},function(t){function e(){t.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(b)),$=function(t){function e(){t.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new T(this.vertices),this.uvBuffer=new T(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.map=function(t,e){var r;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,t=e.x,r=e.y,this.vertices[0]=t,this.vertices[1]=r,this.vertices[2]=t+e.width,this.vertices[3]=r,this.vertices[4]=t+e.width,this.vertices[5]=r+e.height,this.vertices[6]=t,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(b),J=0,tt=(w.prototype.update=function(){this.dirtyId++},w.prototype.add=function(t,e,r){this.uniforms[t]=new w(e,r)},w.from=function(t,e){return new w(t,e)},W.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},function(e){function t(t){e.call(this,t),this.defaultFilterStack=[{}],this.texturePool=new x,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new Q,this.quadUv=new $,this.tempRect=new h.Rectangle,this.activeState={},this.globalUniforms=new w({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=t.view.width,this._pixelsHeight=t.view.height}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new W,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,h=e[0].legacy,u=1;u<e.length;u++)var l=e[u],o=Math.min(o,l.resolution),s=Math.max(s,l.padding),a=a||l.autoFit,h=h||l.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=r.renderTexture.current),i.push(n),n.resolution=o,n.legacy=h,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(s),a&&n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),n.sourceFrame.ceil(o),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height,n.renderTexture.filterFrame=n.sourceFrame,r.renderTexture.bind(n.renderTexture,n.sourceFrame),r.renderTexture.clear()},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters,i=(this.activeState=e,this.globalUniforms.uniforms),n=(i.outputFrame=e.sourceFrame,i.resolution=e.resolution,i.inputSize),o=i.inputPixel,s=i.inputClamp,n=(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=n[0]*e.resolution,o[1]=n[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*n[2]-.5*o[2],s[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update(),t[t.length-1]);if(1===r.length)r[0].apply(this,e.renderTexture,n.renderTexture,!1,e),this.returnFilterTexture(e.renderTexture);else{for(var a=e.renderTexture,h=((l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame,0),h=0;h<r.length-1;++h){r[h].apply(this,a,l,!0,e);var u=a,a=l,l=u}r[h].apply(this,a,n.renderTexture,!1,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},t.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.renderTexture.bind(r,r?r.filterFrame:null),i&&n.renderTexture.clear(),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.state.set(t.state),n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(p.DRAW_MODES.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(p.DRAW_MODES.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,r=r.destinationFrame,n=e._texture.orig,t=t.set(r.width,0,0,r.height,i.x,i.y),r=e.worldTransform.copyTo(h.Matrix.TEMP_MATRIX);return r.invert(),t.prepend(r),t.scale(1/n.width,1/n.height),t.translate(e.anchor.x,e.anchor.y),t},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},t.prototype.getFilterTexture=function(t,e){"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;var r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(r)),et=(S.prototype.flush=function(){},S.prototype.destroy=function(){this.renderer=null},S.prototype.start=function(){},S.prototype.stop=function(){this.flush()},S.prototype.render=function(t){},function(e){function t(t){e.call(this,t),this.emptyRenderer=new S(t),this.currentRenderer=this.emptyRenderer}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t}(r)),rt=(I.settings.PREFER_ENV=C.isMobile.any?p.ENV.WEBGL:p.ENV.WEBGL2,0),it=function(e){function t(t){e.call(this,t),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={isLost:{configurable:!0}};return r.isLost.get=function(){return!this.gl||this.gl.isContextLost()},t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=rt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=rt++,this.renderer.runners.contextChange.run(t)},t.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},t.prototype.createContext=function(t,e){var r;if(r=I.settings.PREFER_ENV>=p.ENV.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),r},t.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.gl.flush()},t.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(t.prototype,r),t}(r),nt=function(e){function t(t){e.call(this,t),this.managedFramebuffers=[],this.unknownFramebuffer=new o(10,10)}e&&(t.__proto__=e);var r={size:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new h.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion&&(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,I.settings.PREFER_ENV===p.ENV.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1))},t.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++)t.colorTextures[n].texturePart?this.renderer.texture.unbind(t.colorTextures[n].texture):this.renderer.texture.unbind(t.colorTextures[n]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},r.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},t.prototype.clear=function(t,e,r,i){var n=this.gl;n.clearColor(t,e,r,i),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},t.prototype.initFramebuffer=function(t){var e={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},t.prototype.resizeFramebuffer=function(t){for(var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=(r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height)),t.colorTextures),n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t){for(var e,r=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures.length,o=(r.drawBuffers||(n=Math.min(n,1)),[]),s=0;s<n;s++){var a=t.colorTextures[s];a.texturePart?(this.renderer.texture.bind(a.texture,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+s,r.TEXTURE_CUBE_MAP_NEGATIVE_X+a.side,a.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(a,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+s,r.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,0)),o.push(r.COLOR_ATTACHMENT0+s)}1<o.length&&r.drawBuffers(o),t.depthTexture&&this.writeDepthTexture&&(e=t.depthTexture,this.renderer.texture.bind(e,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,e._glTextures[this.CONTEXT_UID].texture,0)),i.stencil||!t.stencil&&!t.depth||(i.stencil=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),t.depthTexture||r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil))},t.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},t.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,n=n.height,i=(r=this.gl).createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,n),t.stencil=i,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i))},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new h.Rectangle},Object.defineProperties(t.prototype,r),t}(r),ot={5126:4,5123:2,5121:1},st=function(e){function t(t){e.call(this,t),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.contextChange=function(){this.disposeAll(!0);var e,o,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.createVertexArray||(e=this.renderer.context.extensions.vertexArrayObject,(e=I.settings.PREFER_ENV===p.ENV.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){},t.bindVertexArray=function(){},t.deleteVertexArray=function(){})),t.vertexAttribDivisor||((o=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return o.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return o.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],i=(i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={}),i[e.program.id]||this.initGeometryVao(t,e.program));this._activeGeometry=t,this._activeVao!==i&&(this._activeVao=i,this.hasVao?r.bindVertexArray(i):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,o=t.buffers[r],s=o._glBuffers[this.CONTEXT_UID];o._updateID!==s.updateID&&(s.updateID=o._updateID,i=o.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,s.buffer),(this._boundBuffer=s).byteLength>=o.data.byteLength?e.bufferSubData(i,0,o.data):(n=o.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,s.byteLength=o.data.byteLength,e.bufferData(i,o.data,n)))}},t.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},t.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,o=["g",t.id];for(r in i)n[r]&&o.push(r);return o.join("-")},t.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var r=this.gl,i=this.CONTEXT_UID,n=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],s=o[n];if(s)return o[e.id]=s;var a,h,u,l=t.buffers,d=t.attributes,c={},f={};for(a in l)c[a]=0,f[a]=0;for(h in d)!d[h].size&&e.attributeData[h]?d[h].size=e.attributeData[h].size:d[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[d[h].buffer]+=d[h].size*ot[d[h].type];for(u in d){var p=d[u],g=p.size;void 0===p.stride&&(c[p.buffer]===g*ot[p.type]?p.stride=0:p.stride=c[p.buffer]),void 0===p.start&&(p.start=f[p.buffer],f[p.buffer]+=g*ot[p.type])}s=r.createVertexArray(),r.bindVertexArray(s);for(var _=0;_<l.length;_++){var m=l[_];m._glBuffers[i]||(m._glBuffers[i]=new Y(r.createBuffer()),(this.managedBuffers[m.id]=m).disposeRunner.add(this)),m._glBuffers[i].refCount++}return this.activateVao(t,e),this._activeVao=s,o[e.id]=s,o[n]=s},t.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},t.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var o=0;o<n.length;o++){var s=n[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(n[o],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.disposeBuffer(this.managedBuffers[e[i]],t)},t.prototype.activateVao=function(t,e){var r,i=this.gl,n=this.CONTEXT_UID,o=t.buffers,s=t.attributes,a=(t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[n].buffer),null);for(r in s){var h=s[r],u=o[h.buffer]._glBuffers[n];if(e.attributeData[r]){a!==u&&(i.bindBuffer(i.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[r].location;if(i.enableVertexAttribArray(u),i.vertexAttribPointer(u,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(u,1)}}}},t.prototype.draw=function(t,e,r,i){var n,o,s=this.gl,a=this._activeGeometry;return a.indexBuffer?(o=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?s.UNSIGNED_SHORT:s.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,o,(r||0)*n,i||1):s.drawElements(t,e||a.indexBuffer.data.length,o,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?s.drawArraysInstanced(t,r,e||a.getSize(),i||1):s.drawArrays(t,r,e||a.getSize()),this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(r);function at(t,e,r,i){var e=ht(t,t.VERTEX_SHADER,e),r=ht(t,t.FRAGMENT_SHADER,r),n=t.createProgram();if(t.attachShader(n,e),t.attachShader(n,r),i)for(var o in i)t.bindAttribLocation(n,i[o],o);return t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(n,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(n)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(n)),t.deleteProgram(n),n=null),t.deleteShader(e),t.deleteShader(r),n}function ht(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(console.warn(r),console.error(t.getShaderInfoLog(e)),null)}function ut(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return lt(2*e);case"bvec3":return lt(3*e);case"bvec4":return lt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function lt(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}var dt,ct={},ft=ct;function pt(){var t,e;return ft!==ct&&!ft.isContextLost()||(t=document.createElement("canvas"),(e=I.settings.PREFER_ENV>=p.ENV.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),ft=e),ft}function gt(t,e,r){return"precision"!==t.substring(0,9)?"precision "+(e===p.PRECISION.HIGH&&r!==p.PRECISION.HIGH?p.PRECISION.MEDIUM:e)+" float;\n"+t:r!==p.PRECISION.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var _t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var mt=null,vt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function yt(t,e){if(!mt){var r=Object.keys(vt);mt={};for(var i=0;i<r.length;++i){var n=r[i];mt[t[n]]=vt[n]}}return mt[e]}var xt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Et={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Tt,bt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function wt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=bt.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}function A(t,e,r){void 0===r&&(r="pixi-shader"),this.id=At++,this.vertexSrc=t||A.defaultVertexSrc,this.fragmentSrc=e||A.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Ct[r]?(Ct[r]++,r+="-"+Ct[r]):Ct[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=gt(this.vertexSrc,I.settings.PRECISION_VERTEX,p.PRECISION.HIGH),this.fragmentSrc=gt(this.fragmentSrc,I.settings.PRECISION_FRAGMENT,(dt||(dt=p.PRECISION.MEDIUM,(t=pt())&&t.getShaderPrecisionFormat&&(t=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),dt=t.precision?p.PRECISION.HIGH:p.PRECISION.MEDIUM)),dt))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}function O(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof w?e:new w(e):new w({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}function M(){this.data=0,this.blendMode=p.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0}function P(t,e){this._texture=t,this.mapCoord=new h.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}function St(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var At=0,Ct={},v={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}},e=(A.prototype.extractData=function(t,e){var r=pt();r?(t=at(r,t,e),this.attributeData=this.getAttributeData(t,r),this.uniformData=this.getUniformData(t,r),r.deleteProgram(t)):(this.uniformData={},this.attributeData={})},A.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<n;o++){var s=e.getActiveAttrib(t,o),a=yt(e,s.type),a={type:a,name:s.name,size:_t[a],location:0};r[s.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(var h=0;h<i.length;h++)i[h].location=h;return r},A.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var o=e.getActiveUniform(t,n),s=o.name.replace(/\[.*?\]/,""),a=o.name.match(/\[.*?\]/,""),h=yt(e,o.type);r[s]={type:h,size:o.size,isArray:a,value:ut(h,o.size)}}return r},v.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},v.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},A.from=function(t,e,r){var i=t+e,n=C.ProgramCache[i];return n||(C.ProgramCache[i]=n=new A(t,e,r)),n},Object.defineProperties(A,v),{uniforms:{configurable:!0}}),c=(O.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},O.prototype.destroy=function(){this.uniformGroup=null},e.uniforms.get=function(){return this.uniformGroup.uniforms},O.from=function(t,e,r){t=A.from(t,e);return new O(t,r)},Object.defineProperties(O.prototype,e),{blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}}),m=(c.blend.get=function(){return!!(1&this.data)},c.blend.set=function(t){!!(1&this.data)!==t&&(this.data^=1)},c.offsets.get=function(){return!!(2&this.data)},c.offsets.set=function(t){!!(2&this.data)!==t&&(this.data^=2)},c.culling.get=function(){return!!(4&this.data)},c.culling.set=function(t){!!(4&this.data)!==t&&(this.data^=4)},c.depthTest.get=function(){return!!(8&this.data)},c.depthTest.set=function(t){!!(8&this.data)!==t&&(this.data^=8)},c.clockwiseFrontFace.get=function(){return!!(16&this.data)},c.clockwiseFrontFace.set=function(t){!!(16&this.data)!==t&&(this.data^=16)},c.blendMode.get=function(){return this._blendMode},c.blendMode.set=function(t){this.blend=t!==p.BLEND_MODES.NONE,this._blendMode=t},c.polygonOffset.get=function(){return this._polygonOffset},c.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},M.for2d=function(){var t=new M;return t.depthTest=!1,t.blend=!0,t},Object.defineProperties(M.prototype,c),function(i){function n(t,e,r){t=A.from(t||n.defaultVertexSrc,e||n.defaultFragmentSrc);i.call(this,t,r),this.padding=0,this.resolution=I.settings.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new M}i&&(n.__proto__=i);var t={blendMode:{configurable:!0}},e={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i,n)},t.blendMode.get=function(){return this.state.blendMode},t.blendMode.set=function(t){this.state.blendMode=t},e.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},e.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(n.prototype,t),Object.defineProperties(n,e),n}(O)),It=(m.SOURCE_KEY_MAP={},new h.Matrix),v={texture:{configurable:!0}},Rt=(v.texture.get=function(){return this._texture},v.texture.set=function(t){this._texture=t,this._updateID=-1},P.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],o=t[i+1];e[i]=n*r.a+o*r.c+r.tx,e[i+1]=n*r.b+o*r.d+r.ty}return e},P.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._updateID===e._updateID)return!1;this._updateID=e._updateID;var t=e._uvs,t=(this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0),e.orig),r=e.trim,t=(r&&(It.set(t.width/r.width,0,0,t.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(It)),e.baseTexture),r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},Object.defineProperties(P.prototype,v),function(r){function t(t){var e=new h.Matrix;r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),t.renderable=!1,this.maskSprite=t,this.maskMatrix=e}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.apply=function(t,e,r,i){var n=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new P(o,0)),o.transform.update(),this.uniforms.npmAlpha=o.baseTexture.premultiplyAlpha?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,t.applyFilter(this,e,r,i))},t}(m)),Ot=function(e){function t(t){e.call(this,t),this.scissor=!1,this.scissorData=null,this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.alphaMaskIndex=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.push=function(t,e){var r;e.isSprite?this.pushSpriteMask(t,e):!this.enableScissor||this.scissor||!this.renderer._activeRenderTarget.root||this.renderer.stencil.stencilMaskStack.length||!e.isFastRect()||(r=e.worldTransform,r=Math.atan2(r.b,r.a),(r=Math.round(r*(180/Math.PI)))%90)?this.pushStencilMask(e):this.pushScissorMask(t,e)},t.prototype.pop=function(t,e){e.isSprite?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencil.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},t.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex],i=((r=r||(this.alphaMaskPool[this.alphaMaskIndex]=[new Rt(e)]))[0].resolution=this.renderer.resolution,r[0].maskSprite=e,t.filterArea);t.filterArea=e.getBounds(!0),this.renderer.filter.push(t,r),t.filterArea=i,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(t){this.renderer.batch.flush(),this.renderer.stencil.pushStencil(t)},t.prototype.popStencilMask=function(){this.renderer.stencil.popStencil()},t.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,i=e.getBounds(),n=(i.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.resolution);this.renderer.gl.scissor(i.x*n,(r.root?r.size.height-i.y-i.height:i.y)*n,i.width*n,i.height*n),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},t}(r),Mt=function(e){function t(t){e.call(this,t),this.stencilMaskStack=[]}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.stencilMaskStack.length;(this.stencilMaskStack=t).length!==r&&(0===t.length?e.disable(e.STENCIL_TEST):(e.enable(e.STENCIL_TEST),this._useCurrent()))},t.prototype.pushStencil=function(t){var e=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&(this.renderer.framebuffer.forceStencil(),e.enable(e.STENCIL_TEST)),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,r,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},t.prototype.popStencil=function(){var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){e.prototype.destroy.call(this,this),this.stencilMaskStack=null},t}(r),Pt=function(e){function t(t){e.call(this,t),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new h.Matrix,this.transform=null}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);e=this.renderer;e.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,e.globalUniforms.update(),e.shader.shader&&e.shader.syncUniformGroup(e.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix;i?(n.a=1/t.width*2*r,n.d=-1/t.height*2*r,n.tx=-1-e.x*n.a,n.ty=1-e.y*n.d):(n.a=1/t.width*2*r,n.d=1/t.height*2*r,n.tx=-1-e.x*n.a,n.ty=-1-e.y*n.d)},t.prototype.setTransform=function(){},t}(r),F=new h.Rectangle,Ft=function(e){function t(t){e.call(this,t),this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.bind=function(t,e,r){this.current=t=void 0===t?null:t;var i,n=this.renderer;t?(i=(t=t.baseTexture).resolution,r||(F.width=t.realWidth,F.height=t.realHeight,r=F),e=e||r,this.renderer.framebuffer.bind(t.framebuffer,r),this.renderer.projection.update(r,e,i,!1),this.renderer.stencil.setMaskStack(t.stencilMaskStack)):(i=this.renderer.resolution,r||(F.width=n.width,F.height=n.height,r=F),e=e||r,n.framebuffer.bind(null,r),this.renderer.projection.update(r,e,i,!0),this.renderer.stencil.setMaskStack(this.defaultMaskStack)),this.sourceFrame.copyFrom(e),this.destinationFrame.x=r.x/i,this.destinationFrame.y=r.y/i,this.destinationFrame.width=r.width/i,this.destinationFrame.height=r.height/i,e===r&&this.sourceFrame.copyFrom(this.destinationFrame)},t.prototype.clear=function(t){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(r),Dt=(St.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},0),Nt=function(e){function t(t){e.call(this,t),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=Dt++}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.systemCheck=function(){if(!function(){if("boolean"!=typeof Tt)try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Tt=!0===t({a:"b"},"a","b")}catch(t){Tt=!1}return Tt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||this.syncUniformGroup(t.uniformGroup),i},t.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t){var e=this.getglProgram();t.static&&t.dirtyId===e.uniformGroups[t.id]||(e.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,e))},t.prototype.syncUniforms=function(t,e){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=0,n="var v = null;\n    var cv = null\n    var gl = renderer.gl";for(r in t.uniforms){var o=e[r];o?"float"===o.type&&1===o.size?n+="\n            if(uv."+r+" !== ud."+r+".value)\n            {\n                ud."+r+".value = uv."+r+"\n                gl.uniform1f(ud."+r+".location, uv."+r+")\n            }\n":"sampler2D"!==o.type&&"samplerCube"!==o.type&&"sampler2DArray"!==o.type||1!==o.size||o.isArray?"mat3"===o.type&&1===o.size?void 0!==t.uniforms[r].a?n+="\n                gl.uniformMatrix3fv(ud."+r+".location, false, uv."+r+".toArray(true));\n                \n":n+="\n                gl.uniformMatrix3fv(ud."+r+".location, false, uv."+r+");\n                \n":"vec2"===o.type&&1===o.size?void 0!==t.uniforms[r].x?n+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+r+".location, v.x, v.y);\n                }\n":n+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+r+".location, v[0], v[1]);\n                }\n                \n":"vec4"===o.type&&1===o.size?void 0!==t.uniforms[r].width?n+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+r+".location, v.x, v.y, v.width, v.height)\n                }\n":n+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+r+".location, v[0], v[1], v[2], v[3])\n                }\n                \n":n+="\n            cv = ud."+r+".value;\n            v = uv."+r+";\n            "+(1===o.size?xt:Et)[o.type].replace("location","ud."+r+".location")+";\n":(n+="\n            renderer.texture.bind(uv."+r+", "+i+");\n\n            if(ud."+r+".value !== "+i+")\n            {\n                ud."+r+".value = "+i+";\n                gl.uniform1i(ud."+r+".location, "+i+");\n; // eslint-disable-line max-len\n            }\n",i++):t.uniforms[r].group&&(n+="\n                    renderer.shader.syncUniformGroup(uv."+r+");\n                ")}return new Function("ud","uv","renderer",n)}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(t){var e,r=this.gl,i=t.program,n={};for(e in i.attributeData)n[e]=i.attributeData[e].location;var o,s=at(r,i.vertexSrc,i.fragmentSrc,n),a={};for(o in i.uniformData){var h=i.uniformData[o];a[o]={location:r.getUniformLocation(s,o),value:ut(h.type,h.size)}}t=new St(s,a);return i.glPrograms[this.renderer.CONTEXT_UID]=t},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(r);function Ut(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}var Bt=function(e){function r(t){e.call(this,t),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=p.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new M,this.defaultState.blend=!0,this.defaultState.depth=!0}return e&&(r.__proto__=e),((r.prototype=Object.create(e&&e.prototype)).constructor=r).prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[p.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[p.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.NONE]=[0,0],e[p.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[p.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[p.BLEND_MODES.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[p.BLEND_MODES.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[p.BLEND_MODES.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[p.BLEND_MODES.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[p.BLEND_MODES.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[p.BLEND_MODES.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,t=this.blendModes[t],e=this.gl,2===t.length?e.blendFunc(t[0],t[1]):e.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,e.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD)))},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(e.polygonOffset,0)},r}(r),Lt=function(e){function t(t){e.call(this,t),this.count=0,this.checkCount=0,this.maxIdle=I.settings.GC_MAX_IDLE,this.checkCountMax=I.settings.GC_MAX_CHECK_COUNT,this.mode=I.settings.GC_MODE}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.postrender=function(){this.count++,this.mode!==p.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture);for(var r=t.children.length-1;0<=r;r--)this.unload(t.children[r])},t}(r),kt=function(e){function t(t){e.call(this,t),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new R}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.contextChange=function(){var t=this.gl=this.renderer.gl,e=(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new Ut(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Ut(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var o=0;o<this.boundTextures.length;o++)this.bind(null,o)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.baseTexture||t).valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.boundTextures[e]!==t&&i.bindTexture(t.target,r.texture),r.dirtyId!==t.dirtyId&&this.updateTexture(t),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(var n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),r[n]=null)},t.prototype.initTexture=function(t){var e=new Ut(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===p.TYPES.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},t.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)||(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},t.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.baseTexture||t)._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(r=this.managedTextures.indexOf(t))&&C.removeItems(this.managedTextures,r,1))},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==p.MIPMAP_MODES.POW2&&2===this.webGLVersion||t.isPowerOfTwo?(e.mipmap=1<=t.mipmap,e.wrapMode=t.wrapMode):(e.mipmap=0,e.wrapMode=p.WRAP_MODES.CLAMP),t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(e=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===p.SCALE_MODES.LINEAR&&(r=Math.min(t.anisotropicLevel,i.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY_EXT,r))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode?i.LINEAR:i.NEAREST)},t}(r),e={FilterSystem:tt,BatchSystem:et,ContextSystem:it,FramebufferSystem:nt,GeometrySystem:st,MaskSystem:Ot,StencilSystem:Mt,ProjectionSystem:Pt,RenderTextureSystem:Ft,ShaderSystem:Nt,StateSystem:Bt,TextureGCSystem:Lt,TextureSystem:kt},Gt=new h.Matrix,c=function(r){function t(t,e){r.call(this),(e=Object.assign({},I.settings.RENDER_OPTIONS,e)).roundPixels&&(I.settings.ROUND_PIXELS=e.roundPixels,C.deprecation("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=e,this.type=p.RENDERER_TYPE.UNKNOWN,this.screen=new h.Rectangle(0,0,e.width,e.height),this.view=e.view||document.createElement("canvas"),this.resolution=e.resolution||I.settings.RESOLUTION,this.transparent=e.transparent,this.autoDensity=e.autoDensity||e.autoResize||!1,this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.clearBeforeRender=e.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=e.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new U.Container,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}r&&(t.__proto__=r);var e={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},e.width.get=function(){return this.view.width},e.height.get=function(){return this.view.height},t.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},t.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds()).width&&(i.width=1),0===i.height&&(i.height=1);e=X.create(0|i.width,0|i.height,e,r);return Gt.tx=-i.x,Gt.ty=-i.y,this.render(t,e,!1,Gt,!!t.parent),e},t.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=p.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},e.backgroundColor.get=function(){return this._backgroundColor},e.backgroundColor.set=function(t){this._backgroundColor=t,this._backgroundColorString=C.hex2string(t),C.hex2rgb(t,this._backgroundColorRgba)},Object.defineProperties(t.prototype,e),t}(C.EventEmitter),Vt=function(r){function i(t){r.call(this,"WebGL",t=void 0===t?{}:t),t=this.options,this.type=p.RENDERER_TYPE.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new n.Runner("destroy"),contextChange:new n.Runner("contextChange",1),reset:new n.Runner("reset"),update:new n.Runner("update"),postrender:new n.Runner("postrender"),prerender:new n.Runner("prerender"),resize:new n.Runner("resize",2)},this.globalUniforms=new w({projectionMatrix:new h.Matrix},!0),this.addSystem(Ot,"mask").addSystem(it,"context").addSystem(Bt,"state").addSystem(Nt,"shader").addSystem(kt,"texture").addSystem(st,"geometry").addSystem(nt,"framebuffer").addSystem(Mt,"stencil").addSystem(Pt,"projection").addSystem(Lt,"textureGC").addSystem(tt,"filter").addSystem(Ft,"renderTexture").addSystem(et,"batch"),this.initPlugins(i.__plugins),t.context?this.context.initFromContext(t.context):this.context.initFromOptions({alpha:this.transparent,antialias:t.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,C.sayHello(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}return r&&(i.__proto__=r),((i.prototype=Object.create(r&&r.prototype)).constructor=i).create=function(t){if(C.isWebGLSupported())return new i(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},i.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},i.prototype.render=function(t,e,r,i,n){this.renderingToScreen=!e,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=i,this.context.isLost||(e||(this._lastObjectRendered=t),n||(i=t.parent,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=i),this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender"))},i.prototype.resize=function(t,e){r.prototype.resize.call(this,t,e),this.runners.resize.run(t,e)},i.prototype.reset=function(){return this.runners.reset.run(),this},i.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},i.prototype.destroy=function(t){for(var e in this.runners.destroy.run(),this.runners)this.runners[e].destroy();r.prototype.destroy.call(this,t),this.gl=null},i.registerPlugin=function(t,e){(i.__plugins=i.__plugins||{})[t]=e},i}(c);function Xt(){this.textures=[],this.ids=[],this.blend=0,this.textureCount=0,this.start=0,this.size=0,this.type=4}function D(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}function zt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}function jt(){}var v=function(t){function r(){t.apply(this,arguments)}return t&&(r.__proto__=t),((r.prototype=Object.create(t&&t.prototype)).constructor=r).from=function(t,e){return new r(new f(t,e))},r}(R),N={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}},Ht=(N.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},N.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},N.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},N.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},N.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},D.prototype.view=function(t){return this[t+"View"]},D.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},D.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Object.defineProperties(D.prototype,N),function(r){function t(t){r.call(this,t),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=M.for2d(),this.size=8e3,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._drawCalls=[];for(var e=0;e<this.size/4;e++)this._drawCalls[e]=new Xt;this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.contextChange=function(){var t=this.renderer.gl;I.settings.PREFER_ENV===p.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),I.settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=wt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedElements[this._bufferSize++]=t)},t.prototype.flush=function(){if(0!==this._vertexCount){for(var t,e,r=this.getAttributeBuffer(this._vertexCount),i=this.getIndexBuffer(this._indexCount),n=this.renderer.gl,o=this,s=o._bufferedElements,a=o._drawCalls,h=o.MAX_TEXTURES,u=o._packedGeometries,l=o.vertexSize,d=this.renderer.textureGC.count,c=0,f=0,p=0,g=a[0],_=0,m=-1,v=(g.textureCount=0,g.start=0,g.blend=m,++R._globalBatch),y=0;y<this._bufferSize;++y){var x=s[y],E=(s[y]=null,t=x._texture.baseTexture,C.premultiplyBlendMode[t.premultiplyAlpha?1:0][x.blendMode]);m!==E&&(m=E,e=null,p=h,v++),e!==t&&(e=t)._batchEnabled!==v&&(p===h&&(v++,p=0,g.size=f-g.start,(g=a[_++]).textureCount=0,g.blend=m,g.start=f),t.touched=d,t._batchEnabled=v,t._id=p,g.textures[g.textureCount++]=t,p++),this.packInterleavedGeometry(x,r,i,c,f),c+=x.vertexData.length/2*l,f+=x.indices.length}R._globalBatch=v,g.size=f-g.start,I.settings.CAN_UPLOAD_SAME_BUFFER?(u[this._flushId]._buffer.update(r.rawBinaryData,0),u[this._flushId]._indexBuffer.update(i,0),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,u[this._flushId]=new this.geometryClass),u[this._flushId]._buffer.update(r.rawBinaryData,0),u[this._flushId]._indexBuffer.update(i,0),this.renderer.geometry.bind(u[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++);var T=this.renderer.texture,b=this.renderer.state;for(y=0;y<_;y++){for(var w=a[y],S=w.textureCount,A=0;A<S;A++)T.bind(w.textures[A],A),w.textures[A]=null;b.setBlendMode(w.blend),n.drawElements(w.type,w.size,n.UNSIGNED_SHORT,2*w.start)}this._bufferSize=0,this._vertexCount=0,this._indexCount=0}},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),I.settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._drawCalls=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(t){var t=C.nextPow2(Math.ceil(t/8)),e=C.log2(t),t=8*t,e=(this._aBuffers.length<=e&&(this._iBuffers.length=e+1),this._aBuffers[t]);return e||(this._aBuffers[t]=e=new D(t*this.vertexSize*4)),e},t.prototype.getIndexBuffer=function(t){var t=C.nextPow2(Math.ceil(t/12)),e=C.log2(t),t=12*t,r=(this._iBuffers.length<=e&&(this._iBuffers.length=e+1),this._iBuffers[e]);return r||(this._iBuffers[e]=r=new Uint16Array(t)),r},t.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var o=e.uint32View,s=e.float32View,a=i/this.vertexSize,h=t.uvs,u=t.indices,l=t.vertexData,d=t._texture.baseTexture._id,e=Math.min(t.worldAlpha,1),c=e<1&&t._texture.baseTexture.premultiplyAlpha?C.premultiplyTint(t._tintRGB,e):t._tintRGB+(255*e<<24),f=0;f<l.length;f+=2)s[i++]=l[f],s[i++]=l[f+1],s[i++]=h[f],s[i++]=h[f+1],o[i++]=c,s[i++]=d;for(var p=0;p<u.length;p++)r[n++]=a+u[p]},t}(S)),Wt=(zt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=w.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new A(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new h.Matrix,default:this.defaultGroupCache[t]};return new O(this.programCache[t],i)},zt.prototype.generateSampleSrc=function(t){for(var e=(e="")+"\n"+"\n",r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e=(e+="\n{")+"\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);\n}";return e=e+"\n"+"\n"},function(e){function t(t){void 0===t&&(t=!1),e.call(this),this._buffer=new T(null,t,!1),this._indexBuffer=new T(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,p.TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,p.TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,p.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,p.TYPES.FLOAT).addIndex(this._indexBuffer)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(b)),Yt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Kt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",N={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}},N=(jt.create=function(t){var t=Object.assign({vertex:Yt,fragment:Kt,geometryClass:Wt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,o=t.geometryClass;return function(e){function t(t){e.call(this,t),this.shaderGenerator=new zt(r,i),this.geometryClass=o,this.vertexSize=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(Ht)},N.defaultVertexSrc.get=function(){return Yt},N.defaultFragmentTemplate.get=function(){return Kt},Object.defineProperties(jt,N),jt.create());return t.AbstractBatchRenderer=Ht,t.AbstractRenderer=c,t.Attribute=E,t.BaseRenderTexture=y,t.BaseTexture=R,t.BatchDrawCall=Xt,t.BatchGeometry=Wt,t.BatchPluginFactory=jt,t.BatchRenderer=N,t.BatchShaderGenerator=zt,t.Buffer=T,t.CubeTexture=v,t.Filter=m,t.Framebuffer=o,t.GLProgram=St,t.GLTexture=R,t.Geometry=b,t.ObjectRenderer=S,t.Program=A,t.Quad=Q,t.QuadUv=$,t.RenderTexture=X,t.RenderTexturePool=x,t.Renderer=Vt,t.Shader=O,t.SpriteMaskFilter=Rt,t.State=M,t.System=r,t.Texture=_,t.TextureMatrix=P,t.TextureUvs=l,t.UniformGroup=w,t.ViewableBuffer=D,t.autoDetectRenderer=function(t){return Vt.create(t)},t.checkMaxIfStatementsInShader=wt,t.defaultFilterVertex="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",t.defaultVertex="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",t.resources=d,t.systems=e,t}({},PIXI,PIXI.utils,PIXI,PIXI,PIXI,PIXI,PIXI);Object.assign(this.PIXI,_pixi_core);
this.PIXI=this.PIXI||{};var _pixi_sprite=function(t,r,s,h,n,e,o){"use strict";var a=new r.Point,u=new Uint16Array([0,1,2,0,2,3]),e=function(e){function i(t){e.call(this),this._anchor=new r.ObservablePoint(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=n.BLEND_MODES.NORMAL,this.shader=null,this._cachedTint=16777215,this.uvs=null,this.texture=t||h.Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=u,this.size=4,this.start=0,this.pluginName="batch",this.isSprite=!0,this._roundPixels=o.settings.ROUND_PIXELS}e&&(i.__proto__=e);var t={roundPixels:{configurable:!0},width:{configurable:!0},height:{configurable:!0},anchor:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return((i.prototype=Object.create(e&&e.prototype)).constructor=i).prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=s.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=s.sign(this.scale.y)*this._height/this._texture.orig.height)},i.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},i.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,s=e.c,h=e.d,n=e.tx,e=e.ty,o=this.vertexData,a=t.trim,t=t.orig,u=this._anchor,_=0,c=0,d=0,l=0,d=a?(_=(c=a.x-u._x*t.width)+a.width,(l=a.y-u._y*t.height)+a.height):(_=(c=-u._x*t.width)+t.width,(l=-u._y*t.height)+t.height);if(o[0]=i*c+s*l+n,o[1]=h*l+r*c+e,o[2]=i*_+s*l+n,o[3]=h*l+r*_+e,o[4]=i*_+s*d+n,o[5]=h*d+r*_+e,o[6]=i*c+s*d+n,o[7]=h*d+r*c+e,this._roundPixels)for(var x=0;x<8;x++)o[x]=Math.round(o[x])}},i.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,t=t.orig,i=this._anchor,r=this.transform.worldTransform,s=r.a,h=r.b,n=r.c,o=r.d,a=r.tx,r=r.ty,u=-i._x*t.width,_=u+t.width,i=-i._y*t.height,t=i+t.height;e[0]=s*u+n*i+a,e[1]=o*i+h*u+r,e[2]=s*_+n*i+a,e[3]=o*i+h*_+r,e[4]=s*_+n*t+a,e[5]=o*t+h*_+r,e[6]=s*u+n*t+a,e[7]=o*t+h*u+r},i.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},i.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},i.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new r.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,a);var t=this._texture.orig.width,e=this._texture.orig.height,i=-t*this.anchor.x;return a.x>=i&&a.x<i+t&&(i=-e*this.anchor.y,a.y>=i&&a.y<i+e)},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null,this.shader=null},i.from=function(t,e){return new i(t instanceof h.Texture?t:h.Texture.from(t,e))},t.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},t.roundPixels.get=function(){return this._roundPixels},t.width.get=function(){return Math.abs(this.scale.x)*this._texture.orig.width},t.width.set=function(t){var e=s.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},t.height.get=function(){return Math.abs(this.scale.y)*this._texture.orig.height},t.height.set=function(t){var e=s.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},t.anchor.get=function(){return this._anchor},t.anchor.set=function(t){this._anchor.copyFrom(t)},t.tint.get=function(){return this._tint},t.tint.set=function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},t.texture.get=function(){return this._texture},t.texture.set=function(t){this._texture!==t&&(this._texture=t||h.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},Object.defineProperties(i.prototype,t),i}(e.Container);return t.Sprite=e,t}({},PIXI,PIXI.utils,PIXI,PIXI,PIXI,PIXI);Object.assign(this.PIXI,_pixi_sprite);
this.PIXI=this.PIXI||{},this.PIXI.filters=this.PIXI.filters||{};var _pixi_filter_displacement=function(t,r,n){"use strict";r=function(e){function t(t,r){var i=new n.Matrix;t.renderable=!1,e.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,this.scale=new n.Point(r=null==r?20:r,r)}e&&(t.__proto__=e);var r={map:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(t,r,i,e){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.transform.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),a=Math.sqrt(n.c*n.c+n.d*n.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/a,this.uniforms.rotation[3]=n.d/a),t.applyFilter(this,r,i,e)},r.map.get=function(){return this.uniforms.mapSampler},r.map.set=function(t){this.uniforms.mapSampler=t},Object.defineProperties(t.prototype,r),t}(r.Filter);return t.DisplacementFilter=r,t}({},PIXI,PIXI);Object.assign(this.PIXI.filters,_pixi_filter_displacement);
this.PIXI=this.PIXI||{};var _pixi_app=function(e,t,n){"use strict";function s(i){var r=this;i=Object.assign({forceCanvas:!1},i),this.renderer=n.autoDetectRenderer(i),this.stage=new t.Container,s._plugins.forEach(function(e){e.init.call(r,i)})}function i(){}var r={view:{configurable:!0},screen:{configurable:!0}};s.registerPlugin=function(e){s._plugins.push(e)},s.prototype.render=function(){this.renderer.render(this.stage)},r.view.get=function(){return this.renderer.view},r.screen.get=function(){return this.renderer.screen},s.prototype.destroy=function(e,i){var r=this,t=s._plugins.slice(0);t.reverse(),t.forEach(function(e){e.destroy.call(r)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},Object.defineProperties(s.prototype,r),s._plugins=[];return i.init=function(e){var i=this;Object.defineProperty(this,"resizeTo",{set:function(e){window.removeEventListener("resize",this.resize),(this._resizeTo=e)&&(window.addEventListener("resize",this.resize),this.resize())},get:function(){return this._resizeTo}}),this.resize=function(){i._resizeTo&&(i._resizeTo===window?i.renderer.resize(window.innerWidth,window.innerHeight):i.renderer.resize(i._resizeTo.clientWidth,i._resizeTo.clientHeight))},this._resizeTo=null,this.resizeTo=e.resizeTo||null},i.destroy=function(){this.resizeTo=null,this.resize=null},s.registerPlugin(i),e.Application=s,e}({},PIXI,PIXI);Object.assign(this.PIXI,_pixi_app);
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s){"function"==typeof define&&define.amd?define(["jquery"],s):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),s(i),i}:s(jQuery)}(function(g){return g.fn.tilt=function(i){function s(t){this.ticking=!1,g(this).css({"will-change":"transform"}),o.call(this),g(this).trigger("tilt.mouseEnter")}function e(t){this.mousePositions=l(t),r.call(this)}function n(){o.call(this),this.reset=!0,r.call(this),g(this).trigger("tilt.mouseLeave")}function a(){this.glareElement.css({width:""+2*g(this).outerWidth(),height:""+2*g(this).outerWidth()})}var r=function(){this.ticking||(requestAnimationFrame(t.bind(this)),this.ticking=!0)},o=function(){var t=this;void 0!==this.timeout&&clearTimeout(this.timeout),g(this).css({transition:this.settings.speed+"ms "+this.settings.easing}),this.settings.glare&&this.glareElement.css({transition:"opacity "+this.settings.speed+"ms "+this.settings.easing}),this.timeout=setTimeout(function(){g(t).css({transition:""}),t.settings.glare&&t.glareElement.css({transition:""})},this.settings.speed)},l=function(t){return{x:(t=void 0===t?{pageX:g(this).offset().left+g(this).outerWidth()/2,pageY:g(this).offset().top+g(this).outerHeight()/2}:t).pageX,y:t.pageY}},h=function(){var t=g(this).outerWidth(),i=g(this).outerHeight(),s=g(this).offset().left,e=g(this).offset().top,n=(this.mousePositions.x-s)/t,a=(this.mousePositions.y-e)/i;return{tiltX:(this.settings.maxTilt/2-n*this.settings.maxTilt).toFixed(2),tiltY:(a*this.settings.maxTilt-this.settings.maxTilt/2).toFixed(2),percentageX:100*n,percentageY:100*a,angle:Math.atan2(this.mousePositions.x-(s+t/2),-(this.mousePositions.y-(e+i/2)))*(180/Math.PI)}},t=function(){this.transforms=h.call(this),this.reset?(this.reset=!1,g(this).css("transform","perspective("+this.settings.perspective+"px) rotateX(0deg) rotateY(0deg)"),this.settings.glare&&(this.glareElement.css("transform","rotate(180deg) translate(-50%, -50%)"),this.glareElement.css("opacity","0"))):(g(this).css("transform","perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.disableAxis?0:this.transforms.tiltY)+"deg) rotateY("+("y"===this.settings.disableAxis?0:this.transforms.tiltX)+"deg) scale3d("+this.settings.scale+","+this.settings.scale+","+this.settings.scale+")"),this.settings.glare&&(this.glareElement.css("transform","rotate("+this.transforms.angle+"deg) translate(-50%, -50%)"),this.glareElement.css("opacity",""+this.transforms.percentageY*this.settings.maxGlare/100)),g(this).trigger("change",[this.transforms]),this.ticking=!1)};return g.fn.tilt.destroy=function(){g(this).each(function(){g(this).find(".js-tilt-glare").remove(),g(this).css({"will-change":"",transform:""}),g(this).off("mousemove mouseenter mouseleave")})},g.fn.tilt.getValues=function(){var t=[];return g(this).each(function(){this.mousePositions=l.call(this),t.push(h.call(this))}),t},g.fn.tilt.reset=function(){g(this).each(function(){var t=this;this.mousePositions=l.call(this),this.settings=g(this).data("settings"),n.call(this),setTimeout(function(){t.reset=!1},this.settings.transition)})},this.each(function(){var t=this;this.settings=g.extend({maxTilt:g(this).is("[data-tilt-max]")?g(this).data("tilt-max"):20,perspective:g(this).is("[data-tilt-perspective]")?g(this).data("tilt-perspective"):300,easing:g(this).is("[data-tilt-easing]")?g(this).data("tilt-easing"):"cubic-bezier(.03,.98,.52,.99)",scale:g(this).is("[data-tilt-scale]")?g(this).data("tilt-scale"):"1",speed:g(this).is("[data-tilt-speed]")?g(this).data("tilt-speed"):"400",transition:!g(this).is("[data-tilt-transition]")||g(this).data("tilt-transition"),disableAxis:g(this).is("[data-tilt-disable-axis]")?g(this).data("tilt-disable-axis"):null,axis:g(this).is("[data-tilt-axis]")?g(this).data("tilt-axis"):null,reset:!g(this).is("[data-tilt-reset]")||g(this).data("tilt-reset"),glare:!!g(this).is("[data-tilt-glare]")&&g(this).data("tilt-glare"),maxGlare:g(this).is("[data-tilt-maxglare]")?g(this).data("tilt-maxglare"):1},i),null!==this.settings.axis&&(console.warn("Tilt.js: the axis setting has been renamed to disableAxis. See https://github.com/gijsroge/tilt.js/pull/26 for more information"),this.settings.disableAxis=this.settings.axis),this.init=function(){g(t).data("settings",t.settings),t.settings.glare&&function(){var t=this.settings.glarePrerender;t||g(this).append('<div class="js-tilt-glare"><div class="js-tilt-glare-inner"></div></div>'),this.glareElementWrapper=g(this).find(".js-tilt-glare"),this.glareElement=g(this).find(".js-tilt-glare-inner"),t||(this.glareElementWrapper.css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}).css({overflow:"hidden","pointer-events":"none"}),this.glareElement.css({position:"absolute",top:"50%",left:"50%","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",width:""+2*g(this).outerWidth(),height:""+2*g(this).outerWidth(),transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"}))}.call(t),function(){g(this).on("mousemove",e),g(this).on("mouseenter",s),this.settings.reset&&g(this).on("mouseleave",n),this.settings.glare&&g(window).on("resize",a.bind(this))}.call(t)},this.init()})},g("[data-tilt]").tilt(),!0});
!function(){"use strict";var y,e;function t(e){return void 0===this||Object.getPrototypeOf(this)!==t.prototype?new t(e):((y=this).version="3.3.2",y.tools=new i,y.isSupported()?(y.tools.extend(y.defaults,e||{}),y.defaults.container=m(y.defaults),y.store={elements:{},containers:[]},y.sequences={},y.history=[],y.uid=0,y.initialized=!1):"undefined"!=typeof console&&null!==console&&console.log("ScrollReveal is not supported in this browser."),y)}function m(e){if(e&&e.container){if("string"==typeof e.container)return window.document.documentElement.querySelector(e.container);if(y.tools.isNode(e.container))return e.container;console.log('ScrollReveal: invalid container "'+e.container+'" provided.'),console.log("ScrollReveal: falling back to default container.")}return y.defaults.container}function p(){return++y.uid}function g(e,t){var n=e.config;return"-webkit-transition: "+e.styles.computed.transition+"-webkit-transform "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s, opacity "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s; transition: "+e.styles.computed.transition+"transform "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s, opacity "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s; "}function w(e){var t=e.config,n=e.styles.transform,i="top"===t.origin||"left"===t.origin?/^-/.test(t.distance)?t.distance.substr(1):"-"+t.distance:t.distance;parseInt(t.distance)&&(n.initial+=" translate"+t.axis+"("+i+")",n.target+=" translate"+t.axis+"(0)"),t.scale&&(n.initial+=" scale("+t.scale+")",n.target+=" scale(1)"),t.rotate.x&&(n.initial+=" rotateX("+t.rotate.x+"deg)",n.target+=" rotateX(0)"),t.rotate.y&&(n.initial+=" rotateY("+t.rotate.y+"deg)",n.target+=" rotateY(0)"),t.rotate.z&&(n.initial+=" rotateZ("+t.rotate.z+"deg)",n.target+=" rotateZ(0)"),n.initial+="; opacity: "+t.opacity+";",n.target+="; opacity: "+e.styles.computed.opacity+";"}function v(){if(y.isSupported()){n();for(var e=0;e<y.store.containers.length;e++)y.store.containers[e].addEventListener("scroll",a),y.store.containers[e].addEventListener("resize",a);y.initialized||(window.addEventListener("scroll",a),window.addEventListener("resize",a),y.initialized=!0)}return y}function a(){e(n)}function n(){var s,r,n,i,o;y.tools.forOwn(y.sequences,function(e){o=y.sequences[e],n=!1;for(var t=0;t<o.elemIds.length;t++)i=o.elemIds[t],c(y.store.elements[i])&&!n&&(n=!0);o.active=n}),y.tools.forOwn(y.store.elements,function(e){var t,n,i,o;r=y.store.elements[e],n=(e=r).config.useDelay,s="always"===n||"onload"===n&&!y.initialized||"once"===n&&!e.seen,!function(e){{var t;if(e.sequence)return(t=y.sequences[e.sequence.id]).active&&!t.blocked&&!e.revealing&&!e.disabled}return c(e)&&!e.revealing&&!e.disabled}(r)?function(e){if(e.sequence)return!y.sequences[e.sequence.id].active&&e.config.reset&&e.revealing&&!e.disabled;return!c(e)&&e.config.reset&&e.revealing&&!e.disabled}(r)&&(r.config.beforeReset(r.domEl),r.domEl.setAttribute("style",r.styles.inline+r.styles.transform.initial+r.styles.transition.instant),l("reset",r),r.revealing=!1):(r.config.beforeReveal(r.domEl),s?r.domEl.setAttribute("style",r.styles.inline+r.styles.transform.target+r.styles.transition.delayed):r.domEl.setAttribute("style",r.styles.inline+r.styles.transform.target+r.styles.transition.instant),l("reveal",r,s),r.revealing=!0,r.seen=!0,r.sequence&&(t=r,n=s,i=e=0,(o=y.sequences[t.sequence.id]).blocked=!0,n&&"onload"===t.config.useDelay&&(i=t.config.delay),t.sequence.timer&&(e=Math.abs(t.sequence.timer.started-new Date),window.clearTimeout(t.sequence.timer)),t.sequence.timer={started:new Date},t.sequence.timer.clock=window.setTimeout(function(){o.blocked=!1,t.sequence.timer=null,a()},Math.abs(o.interval)+i-e)))})}function l(e,t,n){var i=0,o=0,s="after";switch(e){case"reveal":o=t.config.duration,n&&(o+=t.config.delay),s+="Reveal";break;case"reset":o=t.config.duration,s+="Reset"}t.timer&&(i=Math.abs(t.timer.started-new Date),window.clearTimeout(t.timer.clock)),t.timer={started:new Date},t.timer.clock=window.setTimeout(function(){t.config[s](t.domEl),t.timer=null},o-i)}function f(e){for(var t=0,n=0,i=e.offsetHeight,o=e.offsetWidth;isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(n+=e.offsetLeft),e=e.offsetParent;);return{top:t,left:n,height:i,width:o}}function c(e){var t,n,i,o=f(e.domEl),s={width:(s=e.config.container).clientWidth,height:s.clientHeight},r=(r=e.config.container)&&r!==window.document.documentElement?(a=f(r),{x:r.scrollLeft+a.left,y:r.scrollTop+a.top}):{x:window.pageXOffset,y:window.pageYOffset},a=e.config.viewFactor,l=o.height,c=o.width,d=o.top,o=o.left;return t=d+l*a,n=o+c*a,d=d+l-l*a,l=o+c-c*a,o=r.y+e.config.viewOffset.top,c=r.x+e.config.viewOffset.left,i=r.y-e.config.viewOffset.bottom+s.height,r=r.x-e.config.viewOffset.right+s.width,t<i&&o<d&&c<n&&l<r||"fixed"===window.getComputedStyle(e.domEl).position}function i(){}t.prototype.defaults={origin:"bottom",distance:"20px",duration:500,delay:0,rotate:{x:0,y:0,z:0},opacity:0,scale:.9,easing:"cubic-bezier(0.6, 0.2, 0.1, 1)",container:window.document.documentElement,mobile:!0,reset:!1,useDelay:"always",viewFactor:.2,viewOffset:{top:0,right:0,bottom:0,left:0},beforeReveal:function(e){},beforeReset:function(e){},afterReveal:function(e){},afterReset:function(e){}},t.prototype.isSupported=function(){var e=document.documentElement.style;return"WebkitTransition"in e&&"WebkitTransform"in e||"transition"in e&&"transform"in e},t.prototype.reveal=function(e,t,n,i){var o,s,r,a;if(void 0!==t&&"number"==typeof t?(n=t,t={}):null==t&&(t={}),o=m(t),(s=function(e,t){{if("string"==typeof e)return Array.prototype.slice.call(t.querySelectorAll(e));if(y.tools.isNode(e))return[e];if(y.tools.isNodeList(e))return Array.prototype.slice.call(e)}return[]}(e,o)).length){n&&"number"==typeof n&&(l=p(),a=y.sequences[l]={id:l,interval:n,elemIds:[],active:!1});for(var l,c=0;c<s.length;c++){(d=s[c].getAttribute("data-sr-id"))?r=y.store.elements[d]:(r={id:p(),domEl:s[c],seen:!1,revealing:!1}).domEl.setAttribute("data-sr-id",r.id),a&&(r.sequence={id:a.id,index:a.elemIds.length},a.elemIds.push(r.id)),u=f=d=void 0;var d=r,f=t,u=o,u=(f.container&&(f.container=u),d.config?d.config=y.tools.extendClone(d.config,f):d.config=y.tools.extendClone(y.defaults,f),"top"===d.config.origin||"bottom"===d.config.origin?d.config.axis="Y":d.config.axis="X",f=u=void 0,r),f=window.getComputedStyle(u.domEl),d=(u.styles||(u.styles={transition:{},transform:{},computed:{}},u.styles.inline=u.domEl.getAttribute("style")||"",u.styles.inline+="; visibility: visible; ",u.styles.computed.opacity=f.opacity,f.transition&&"all 0s ease 0s"!==f.transition?u.styles.computed.transition=f.transition+", ":u.styles.computed.transition=""),u.styles.transition.instant=g(u,0),u.styles.transition.delayed=g(u,u.config.delay),u.styles.transform.initial=" -webkit-transform:",u.styles.transform.target=" -webkit-transform:",w(u),u.styles.transform.initial+="transform:",u.styles.transform.target+="transform:",w(u),f=d=void 0,r),f=d.config.container;f&&-1===y.store.containers.indexOf(f)&&y.store.containers.push(d.config.container),y.store.elements[d.id]=d,y.tools.isMobile()&&!r.config.mobile||!y.isSupported()?(r.domEl.setAttribute("style",r.styles.inline),r.disabled=!0):r.revealing||r.domEl.setAttribute("style",r.styles.inline+r.styles.transform.initial)}!i&&y.isSupported()&&(l={target:l=e,config:t,interval:n},y.history.push(l),y.initTimeout&&window.clearTimeout(y.initTimeout),y.initTimeout=window.setTimeout(v,0))}else console.log('ScrollReveal: reveal on "'+e+'" failed, no elements found.');return y},t.prototype.sync=function(){if(y.history.length&&y.isSupported()){for(var e=0;e<y.history.length;e++){var t=y.history[e];y.reveal(t.target,t.config,t.interval,!0)}v()}else console.log("ScrollReveal: sync failed, no reveals found.");return y},i.prototype.isObject=function(e){return null!==e&&"object"==typeof e&&e.constructor===Object},i.prototype.isNode=function(e){return"object"==typeof window.Node?e instanceof window.Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},i.prototype.isNodeList=function(e){var t=Object.prototype.toString.call(e);return"object"==typeof window.NodeList?e instanceof window.NodeList:e&&"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(t)&&"number"==typeof e.length&&(0===e.length||this.isNode(e[0]))},i.prototype.forOwn=function(e,t){if(!this.isObject(e))throw new TypeError('Expected "object", but received "'+typeof e+'".');for(var n in e)e.hasOwnProperty(n)&&t(n)},i.prototype.extend=function(t,n){return this.forOwn(n,function(e){this.isObject(n[e])?(t[e]&&this.isObject(t[e])||(t[e]={}),this.extend(t[e],n[e])):t[e]=n[e]}.bind(this)),t},i.prototype.extendClone=function(e,t){return this.extend(this.extend({},e),t)},i.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:window.ScrollReveal=t}();